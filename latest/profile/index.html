<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <link rel="canonical" href="http://hortonworks.github.io/cloudbreak-documentation/profile/index.html"> 
    <link rel="shortcut icon" href="../images/favicon.png">

    <title>Configure Cloudbreak - Cloudbreak</title>

    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../css/base.css" rel="stylesheet">
    <link href="../css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.css">


    <link href="../css/extra.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
    <script>
    (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-22950817-24', 'auto');
    ga('send', 'pageview');
    </script>
    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../index.html">Cloudbreak</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Get Started <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../index.html">Introduction</a>
</li>

                        
                            
<li >
    <a href="../architecture/index.html">Architecture</a>
</li>

                        
                            
<li >
    <a href="../releasenotes/index.html">Release Notes</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">AWS <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../aws-launch/index.html">Launch on AWS</a>
</li>

                        
                            
<li >
    <a href="../aws-create/index.html">Create a Cluster</a>
</li>

                        
                            
<li >
    <a href="../aws-clusters-access/index.html">Access Cluster</a>
</li>

                        
                            
<li >
    <a href="../aws-data/index.html">Access Data on S3</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Azure <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../azure-launch/index.html">Launch on Azure</a>
</li>

                        
                            
<li >
    <a href="../azure-create/index.html">Create a Cluster</a>
</li>

                        
                            
<li >
    <a href="../azure-clusters-access/index.html">Access Cluster</a>
</li>

                        
                            
<li >
    <a href="../azure-data/index.html">Access Data on Azure</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">GCP <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../gcp-launch/index.html">Launch on GCP</a>
</li>

                        
                            
<li >
    <a href="../gcp-create/index.html">Create a Cluster</a>
</li>

                        
                            
<li >
    <a href="../gcp-clusters-access/index.html">Access Cluster</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">OpenStack <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../os-launch/index.html">Launch on Open Stack</a>
</li>

                        
                            
<li >
    <a href="../os-create/index.html">Create a Cluster</a>
</li>

                        
                            
<li >
    <a href="../os-clusters-access/index.html">Access Cluster</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Config & Admin <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Cluster Options</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../blueprints/index.html">Blueprints</a>
</li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Templates</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../templates-aws/index.html">Templates for AWS</a>
</li>

        
            
<li >
    <a href="../templates-azure/index.html">Templates for Azure</a>
</li>

        
            
<li >
    <a href="../templates-gcp/index.html">Templates for GCP</a>
</li>

        
            
<li >
    <a href="../templates-os/index.html">Templates for OpenStack</a>
</li>

        
    </ul>
  </li>

        
            
<li >
    <a href="../recipes/index.html">Recipes</a>
</li>

        
            
<li >
    <a href="../tags/index.html">Resource Tagging</a>
</li>

        
            
<li >
    <a href="../autoscaling/index.html">Auto Scaling</a>
</li>

        
            
<li >
    <a href="../images/index.html">Custom Images</a>
</li>

        
            
<li >
    <a href="../ambari-db/index.html">Ambari Database</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../clusters-manage/index.html">Manage and Monitor Clusters</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Managing Cloudbreak</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../vm-launch/index.html">Install on Your Own VM</a>
</li>

        
            
<li >
    <a href="../credentials/index.html">Manage Cloudbreak Credentials</a>
</li>

        
            
<li >
    <a href="../cb-account/index.html">Manage Your Account</a>
</li>

        
            
<li class="active">
    <a href="index.html">Configure Cloudbreak</a>
</li>

        
            
<li >
    <a href="../cb-db/index.html">Manage Cloudbreak Database</a>
</li>

        
            
<li >
    <a href="../upgrade/index.html">Upgrade Clodbreak</a>
</li>

        
            
<li >
    <a href="../delete/index.html">Delete Cloudbreak</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Security</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../security/index.html">Security Overview</a>
</li>

        
            
<li >
    <a href="../security-cb/index.html">Basic Security</a>
</li>

        
            
<li >
    <a href="../security-ldap/index.html">LDAP/AD</a>
</li>

        
            
<li >
    <a href="../security-kerberos/index.html">Kerberos</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">More <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Troubleshooting</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../trouble-cb/index.html">General Troubleshooting</a>
</li>

        
            
<li >
    <a href="../trouble-aws/index.html">Troubleshooting AWS</a>
</li>

        
            
<li >
    <a href="../trouble-azure/index.html">Troubleshooting Azure</a>
</li>

        
            
<li >
    <a href="../trouble-gcp/index.html">Troubleshooting GCP</a>
</li>

        
            
<li >
    <a href="../trouble-os/index.html">Troubleshooting OpenStack</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../cb-shell/index.html">Cloudbreak Shell</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Developer</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../dev-local-dev/index.html">Set up Local Environment</a>
</li>

        
            
<li >
    <a href="../dev-spi/index.html">Cloudbreak SPI</a>
</li>

        
            
<li >
    <a href="../dev-api/index.html">Cloudbreak APIs</a>
</li>

        
            
<li >
    <a href="../dev-flows/index.html">Flow Diagrams</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../faq/index.html">FAQs</a>
</li>

                        
                            
<li >
    <a href="../get-help/index.html">Getting Help</a>
</li>

                        
                            
<li >
    <a href="../smartsense/index.html">SmartSense</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                
                    <li >
                        <a rel="next" href="../cb-account/index.html">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../cb-db/index.html">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/hortonworks/cloudbreak-documentation">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="first-level active"><a href="#configure-cloudbreak-via-profile-variables">Configure Cloudbreak via Profile Variables</a></li>
        
            <li class="second-level"><a href="#set-profile-variables">Set Profile Variables</a></li>
            
        
            <li class="second-level"><a href="#check-available-profile-variables">Check Available Profile Variables</a></li>
            
        
            <li class="second-level"><a href="#profile-variables">Profile Variables</a></li>
            
                <li class="third-level"><a href="#cloudbreak-variables">Cloudbreak Variables</a></li>
            
                <li class="third-level"><a href="#aws-variables">AWS Variables</a></li>
            
                <li class="third-level"><a href="#azure-variables">Azure Variables</a></li>
            
                <li class="third-level"><a href="#gcp-variables">GCP Variables</a></li>
            
                <li class="third-level"><a href="#local-development-variables">Local Development Variables</a></li>
            
                <li class="third-level"><a href="#macos-variables">MacOS Variables</a></li>
            
                <li class="third-level"><a href="#uaa_default_user_groups">UAA_DEFAULT_USER_GROUPS</a></li>
            
        
            <li class="second-level"><a href="#change-smtp-parameters">Change SMTP Parameters</a></li>
            
        
            <li class="second-level"><a href="#configure-consul">Configure Consul</a></li>
            
        
            <li class="second-level"><a href="#create-environment-specific-profiles">Create Environment Specific Profiles</a></li>
            
        
    
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h2 id="configure-cloudbreak-via-profile-variables">Configure Cloudbreak via Profile Variables</h2>
<p>Cloudbreak deployer configuration is based on environment variables.  </p>
<p>During startup, Cloudbreak deployer tries to determine the underlying infrastructure and then sets required environment variables with appropriate default values. If these environment variables are not sufficient for your use case, you can set additional environment variables in your <code>Profile</code> file. </p>
<p>Cloudbreak deployer always opens a new bash subprocess without inheriting environment variables. Only the following environment variables are inherited:</p>
<ul>
<li><code>HOME</code>  </li>
<li><code>DEBUG</code>  </li>
<li><code>TRACE</code>  </li>
<li><code>CBD_DEFAULT_PROFILE</code>  </li>
<li>all <code>DOCKER_XXX</code> </li>
</ul>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>TO-DO: What do you mean by "Cloudbreak deployer <strong>always</strong> opens a new bash subprocess without inheriting environment variables?" Do you mean during startup or when? Without inheriting from where?</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<h3 id="set-profile-variables">Set Profile Variables</h3>
<p>To set environment variables relevant for Cloudbreak Deployer, add them to a file called <code>Profile</code> located in the Cloudbreak deployment directory (typically <code>/var/lib/cloudbreak-deployment</code>).</p>
<p>The <code>Profile</code> file is sourced, so you can use the usual syntax to set configuration values:</p>
<pre><code>export MY_VAR=some_value
export MY_OTHER_VAR=another_value 
</code></pre>

<h3 id="check-available-profile-variables">Check Available Profile Variables</h3>
<p>To see all available environment variables with their default values, use:</p>
<pre><code>cbd env show
</code></pre>

<h3 id="profile-variables">Profile Variables</h3>
<h4 id="cloudbreak-variables">Cloudbreak Variables</h4>
<p>Refer to this list for available environment variables. The variables are listed with their default values. If default is unset, no value is listed. </p>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Default Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ADDRESS_RESOLVING_TIMEOUT</td>
<td>120000</td>
<td>DNS lookup timeout for internal service discovery</td>
</tr>
<tr>
<td>CAPTURE_CRON_EXPRESSION</td>
<td></td>
<td>SmartSense bundle generation time interval in cron format</td>
</tr>
<tr>
<td>CBD_CERT_ROOT_PATH</td>
<td>"${PWD}/certs"</td>
<td>Path where deployer stores Cloudbreak certificates. ${PWD} refers to the Cloudbreak deployment directory</td>
</tr>
<tr>
<td>CBD_LOG_NAME</td>
<td>cbreak</td>
<td>Name of the Cloudbreak log file</td>
</tr>
<tr>
<td>CBD_TRAEFIK_TLS</td>
<td>"/certs/traefik/client.pem,/certs/traefik/client-key.pem"</td>
<td>Path inside of the Traefik container where TLS files are located</td>
</tr>
<tr>
<td>CB_BLUEPRINT_DEFAULTS</td>
<td>"hdp-small-default;hdp-spark-cluster;hdp-streaming-cluster"</td>
<td>Comma separated list of the default blueprints that Cloudbreak initializes in its database</td>
</tr>
<tr>
<td>CB_BYOS_DFS_DATA_DIR</td>
<td>"/hadoop/hdfs/data"</td>
<td>(Deprecated) Default data directory for BYOS orchestrators</td>
</tr>
<tr>
<td>CB_COMPONENT_CLUSTER_ID</td>
<td></td>
<td>SmartSense component cluster ID</td>
</tr>
<tr>
<td>CB_COMPONENT_ID</td>
<td></td>
<td>SmartSense component ID</td>
</tr>
<tr>
<td>CB_COMPOSE_PROJECT</td>
<td>cbreak</td>
<td>Name of the Docker Compose project; it will appear in container names</td>
</tr>
<tr>
<td>CB_DB_ENV_DB</td>
<td>"cbdb"</td>
<td>Name of the Cloudbreak database</td>
</tr>
<tr>
<td>CB_DB_ENV_PASS</td>
<td>""</td>
<td>Password for the Cloudbreak database authentication</td>
</tr>
<tr>
<td>CB_DB_ENV_SCHEMA</td>
<td>"public"</td>
<td>Schema used in the Cloudbreak database</td>
</tr>
<tr>
<td>CB_DB_ENV_USER</td>
<td>"postgres"</td>
<td>User for the Cloudbreak database authentication</td>
</tr>
<tr>
<td>CB_DB_ROOT_PATH</td>
<td>"/var/lib/cloudbreak"</td>
<td>(Deprecated) Location of the database volume on Cloudbreak host</td>
</tr>
<tr>
<td>CB_DEFAULT_SUBSCRIPTION_ADDRESS</td>
<td>http://uluwatu.service.consul:3000/notifications</td>
<td>URL of the default subscription for Cloudbreak notifications</td>
</tr>
<tr>
<td>CB_ENABLEDPLATFORMS</td>
<td></td>
<td>Set this to disable Cloudbreak resource called Platform</td>
</tr>
<tr>
<td>CB_ENABLE_CUSTOM_IMAGE</td>
<td>"false"</td>
<td>Set to "true" to enable custom cloud images</td>
</tr>
<tr>
<td>CBD_FORCE_START</td>
<td></td>
<td>Set this to disable docker-compose.yml and uaa.yml validation</td>
</tr>
<tr>
<td>CB_HBM2DDL_STRATEGY</td>
<td>"validate"</td>
<td>Configures hibernate.hbm2ddl.auto in Cloudbreak</td>
</tr>
<tr>
<td>CB_HOST_DISCOVERY_CUSTOM_DOMAIN</td>
<td>""</td>
<td>Custom domain of the provisioned cluster</td>
</tr>
<tr>
<td>CB_HTTPS_PROXY</td>
<td>""</td>
<td>HTTPS proxy URL</td>
</tr>
<tr>
<td>CB_HTTP_PROXY</td>
<td>""</td>
<td>HTTP proxy URL</td>
</tr>
<tr>
<td>CB_IMAGE_CATALOG_URL</td>
<td>"https://s3-eu-west-1.amazonaws.com/cloudbreak-info/cb-image-catalog.json"</td>
<td>Image catalog URL</td>
</tr>
<tr>
<td>CB_INSTANCE_NODE_ID</td>
<td></td>
<td>Unique identifier of the Cloudbreak node</td>
</tr>
<tr>
<td>CB_INSTANCE_PROVIDER</td>
<td></td>
<td>Cloud provider of the Cloudbreak instance</td>
</tr>
<tr>
<td>CB_INSTANCE_REGION</td>
<td></td>
<td>Cloud region of the Cloudbreak instance</td>
</tr>
<tr>
<td>CB_INSTANCE_UUID</td>
<td></td>
<td>Unique identifier of Cloudbreak deployment</td>
</tr>
<tr>
<td>CB_JAVA_OPTS</td>
<td>""</td>
<td>Extra Java options for Autoscale and Cloudbreak</td>
</tr>
<tr>
<td>CB_LOG_LEVEL</td>
<td>"INFO"</td>
<td>Log level of the Cloudbreak service</td>
</tr>
<tr>
<td>CB_MAX_SALT_NEW_SERVICE_RETRY</td>
<td>90</td>
<td>Salt orchestrator max retry count</td>
</tr>
<tr>
<td>CB_MAX_SALT_RECIPE_EXECUTION_RETRY</td>
<td>90</td>
<td>Salt orchestrator max retry count for recipes</td>
</tr>
<tr>
<td>CB_PLATFORM_DEFAULT_REGIONS</td>
<td></td>
<td>Comma separated list of default regions by platform. For example: <code>AWS:eu-west-1</code>.</td>
</tr>
<tr>
<td>CB_PRODUCT_ID</td>
<td></td>
<td>SmartSense product ID</td>
</tr>
<tr>
<td>CB_SCHEMA_MIGRATION_AUTO</td>
<td>true</td>
<td>When set to true, enables Cloudbreak automatic database schema update</td>
</tr>
<tr>
<td>CB_SMARTSENSE_CONFIGURE</td>
<td>"false"</td>
<td>Set to “true” to install and configure SmartSense on cluster nodes</td>
</tr>
<tr>
<td>CB_SMARTSENSE_CLUSTER_NAME_PREFIX</td>
<td></td>
<td>SmartSense Cloudbreak cluster name prefix</td>
</tr>
<tr>
<td>CB_SMARTSENSE_ID</td>
<td>""</td>
<td>SmartSense subscription ID</td>
</tr>
<tr>
<td>CB_TEMPLATE_DEFAULTS</td>
<td>"minviable-gcp,minviable-azure,minviable-aws"</td>
<td>Comma separated list of the default templates that Cloudbreak initializes in its database</td>
</tr>
<tr>
<td>CB_UI_MAX_WAIT</td>
<td>400</td>
<td>Wait timeout for <code>cbd start-wait</code> command</td>
</tr>
<tr>
<td>CERT_VALIDATION</td>
<td>"true"</td>
<td>When set to "true", enables cert validation in Cloudbreak and Autoscale</td>
</tr>
<tr>
<td>CLOUDBREAK_SMTP_AUTH</td>
<td>"true"</td>
<td>When set to "true", configures mail.smtp.auth in Cloudbreak</td>
</tr>
<tr>
<td>CLOUDBREAK_SMTP_SENDER_FROM</td>
<td>"noreply@hortonworks.com"</td>
<td>Email address of the sender</td>
</tr>
<tr>
<td>CLOUDBREAK_SMTP_SENDER_HOST</td>
<td>"smtp.service.consul"</td>
<td>SMTP server address of the hostname</td>
</tr>
<tr>
<td>CLOUDBREAK_SMTP_SENDER_PASSWORD</td>
<td>"$LOCAL_SMTP_PASSWORD"</td>
<td>SMTP server password</td>
</tr>
<tr>
<td>CLOUDBREAK_SMTP_SENDER_PORT</td>
<td>25</td>
<td>Port of the SMTP server</td>
</tr>
<tr>
<td>CLOUDBREAK_SMTP_SENDER_USERNAME</td>
<td>"admin"</td>
<td>Username for SMTP authentication</td>
</tr>
<tr>
<td>CLOUDBREAK_SMTP_STARTTLS_ENABLE</td>
<td>"false"</td>
<td>Set to "true" to configure mail.smtp.starttls.enable in Cloudbreak</td>
</tr>
<tr>
<td>CLOUDBREAK_SMTP_TYPE</td>
<td>"smtp"</td>
<td>Defines mail.transport.protocol in CLoudbreak</td>
</tr>
<tr>
<td>COMMON_DB</td>
<td>commondb</td>
<td>Name of the database container</td>
</tr>
<tr>
<td>COMMON_DB_VOL</td>
<td>common</td>
<td>Name of the database volume</td>
</tr>
<tr>
<td>COMPOSE_HTTP_TIMEOUT</td>
<td>120</td>
<td>Docker Compose execution timeout</td>
</tr>
<tr>
<td>DB_DUMP_VOLUME</td>
<td>cbreak_dump</td>
<td>Name of the database dump volume</td>
</tr>
<tr>
<td>DB_MIGRATION_LOG</td>
<td>"db_migration.log"</td>
<td>Database migration log file</td>
</tr>
<tr>
<td>DEFAULT_INBOUND_ACCESS_IP</td>
<td>""</td>
<td>Opens default ports on AWS instances for Cloudbreak</td>
</tr>
<tr>
<td>DOCKER_CONSUL_OPTIONS</td>
<td>""</td>
<td>Extra options for Consul</td>
</tr>
<tr>
<td>DOCKER_IMAGE_CBD_SMARTSENSE</td>
<td>hortonworks/cbd-smartsense</td>
<td>SmartSense Docker image name</td>
</tr>
<tr>
<td>DOCKER_IMAGE_CLOUDBREAK</td>
<td>hortonworks/cloudbreak</td>
<td>Cloudbreak Docker image name</td>
</tr>
<tr>
<td>DOCKER_IMAGE_CLOUDBREAK_AUTH</td>
<td>hortonworks/cloudbreak-auth</td>
<td>Authentication service Docker image name</td>
</tr>
<tr>
<td>DOCKER_IMAGE_CLOUDBREAK_PERISCOPE</td>
<td>hortonworks/cloudbreak-autoscale</td>
<td>Autoscale Docker image name</td>
</tr>
<tr>
<td>DOCKER_IMAGE_CLOUDBREAK_SHELL</td>
<td>hortonworks/cloudbreak-shell</td>
<td>Cloudbreak Shell Docker image name</td>
</tr>
<tr>
<td>DOCKER_IMAGE_CLOUDBREAK_WEB</td>
<td>hortonworks/cloudbreak-web</td>
<td>Web UI Docker image name</td>
</tr>
<tr>
<td>DOCKER_TAG_ALPINE</td>
<td>3.1</td>
<td>Alpine container version</td>
</tr>
<tr>
<td>DOCKER_TAG_CBD_SMARTSENSE</td>
<td>0.10.0</td>
<td>SmartSense container version</td>
</tr>
<tr>
<td>DOCKER_TAG_CERT_TOOL</td>
<td>0.2.0</td>
<td>Cert tool container version</td>
</tr>
<tr>
<td>DOCKER_TAG_CLOUDBREAK</td>
<td>2.1.0-dev.70</td>
<td>Cloudbreak container version</td>
</tr>
<tr>
<td>DOCKER_TAG_CLOUDBREAK_SHELL</td>
<td>2.1.0-dev.70</td>
<td>Cloudbreak Shell container version</td>
</tr>
<tr>
<td>DOCKER_TAG_CONSUL</td>
<td>0.5</td>
<td>Consul container version</td>
</tr>
<tr>
<td>DOCKER_TAG_HAVEGED</td>
<td>1.1.0</td>
<td>Haveged container version</td>
</tr>
<tr>
<td>DOCKER_TAG_LOGROTATE</td>
<td>1.0.0</td>
<td>Logrotate container version</td>
</tr>
<tr>
<td>DOCKER_TAG_MIGRATION</td>
<td>1.0.0</td>
<td>Migration container version</td>
</tr>
<tr>
<td>DOCKER_TAG_PERISCOPE</td>
<td>2.1.0-dev.70</td>
<td>Autoscale container version</td>
</tr>
<tr>
<td>DOCKER_TAG_POSTFIX</td>
<td>latest</td>
<td>Postfix container version</td>
</tr>
<tr>
<td>DOCKER_TAG_POSTGRES</td>
<td>9.6.1-alpine</td>
<td>Postgresql container version</td>
</tr>
<tr>
<td>DOCKER_TAG_REGISTRATOR</td>
<td>v5</td>
<td>Registrator container version</td>
</tr>
<tr>
<td>DOCKER_TAG_SULTANS</td>
<td>2.1.0-dev.70</td>
<td>Authentication service container version</td>
</tr>
<tr>
<td>DOCKER_TAG_TRAEFIK</td>
<td>v1.2.0</td>
<td>Traefik container version</td>
</tr>
<tr>
<td>DOCKER_TAG_UAA</td>
<td>3.6.5</td>
<td>Identity container version</td>
</tr>
<tr>
<td>DOCKER_TAG_ULUWATU</td>
<td>2.1.0-dev.70</td>
<td>Web UI container version</td>
</tr>
<tr>
<td>IDENTITY_DB_NAME</td>
<td>"uaadb"</td>
<td>Name of the Identity database</td>
</tr>
<tr>
<td>IDENTITY_DB_PASS</td>
<td>""</td>
<td>Password for the Identity database authentication</td>
</tr>
<tr>
<td>IDENTITY_DB_URL</td>
<td>"${COMMON_DB}.service.consul:5432"</td>
<td>URL for the Identity database connection, including the port number</td>
</tr>
<tr>
<td>IDENTITY_DB_USER</td>
<td>"postgres"</td>
<td>User for the Identity database authentication</td>
</tr>
<tr>
<td>LOCAL_SMTP_PASSWORD</td>
<td>"$UAA_DEFAULT_USER_PW"</td>
<td>Default password for the internal mail server</td>
</tr>
<tr>
<td>PERISCOPE_DB_HBM2DDL_STRATEGY</td>
<td>"validate"</td>
<td>Configures hibernate.hbm2ddl.auto in Autoscale</td>
</tr>
<tr>
<td>PERISCOPE_DB_NAME</td>
<td>"periscopedb"</td>
<td>Name of the Autoscale database</td>
</tr>
<tr>
<td>PERISCOPE_DB_PASS</td>
<td>""</td>
<td>Password for the Autoscale database authentication</td>
</tr>
<tr>
<td>PERISCOPE_DB_SCHEMA_NAME</td>
<td>"public"</td>
<td>Schema used in the Autoscale database</td>
</tr>
<tr>
<td>PERISCOPE_DB_USER</td>
<td>"postgres"</td>
<td>User for the Autoscale database authentication</td>
</tr>
<tr>
<td>PERISCOPE_DB_TCP_ADDR</td>
<td></td>
<td>Address of the Autoscale database</td>
</tr>
<tr>
<td>PERISCOPE_DB_TCP_PORT</td>
<td></td>
<td>Port number of the Autoscale database</td>
</tr>
<tr>
<td>PERISCOPE_LOG_LEVEL</td>
<td>"INFO"</td>
<td>Log level of the Autoscale service</td>
</tr>
<tr>
<td>PERISCOPE_SCHEMA_MIGRATION_AUTO</td>
<td>true</td>
<td>When set to "true", enables Autoscale automatic database schema update</td>
</tr>
<tr>
<td>PUBLIC_IP</td>
<td></td>
<td>IP address or hostname of the public interface</td>
</tr>
<tr>
<td>REST_DEBUG</td>
<td>"false"</td>
<td>Set to "true" to enable REST call debug level in Cloudbreak and Autoscale</td>
</tr>
<tr>
<td>SL_ADDRESS_RESOLVING_TIMEOUT</td>
<td></td>
<td>DNS lookup timeout of Authentication service for internal service discovery</td>
</tr>
<tr>
<td>SL_NODE_TLS_REJECT_UNAUTHORIZED</td>
<td>"0"</td>
<td>When set to "0", enables self-signed certifications in Authentication service</td>
</tr>
<tr>
<td>SULTANS_CONTAINER_PATH</td>
<td>/sultans</td>
<td>Default project location in Authentication service container</td>
</tr>
<tr>
<td>TRAEFIK_MAX_IDLE_CONNECTION</td>
<td>100</td>
<td>Sets --maxidleconnsperhost for Traefik to the value entered</td>
</tr>
<tr>
<td>UAA_CLOUDBREAK_ID</td>
<td>cloudbreak</td>
<td>Identity of the Cloudbreak scope in Identity</td>
</tr>
<tr>
<td>UAA_CLOUDBREAK_SECRET</td>
<td>$UAA_DEFAULT_SECRET</td>
<td>Secret of the Cloudbreak scope in Identity</td>
</tr>
<tr>
<td>UAA_CLOUDBREAK_SHELL_ID</td>
<td>cloudbreak_shell</td>
<td>Identity of the Cloudbreak Shell scope in Identity</td>
</tr>
<tr>
<td>UAA_DEFAULT_ACCOUNT</td>
<td>"seq1234567.SequenceIQ"</td>
<td>Default account for users as an Identity group</td>
</tr>
<tr>
<td>UAA_DEFAULT_SECRET</td>
<td></td>
<td>Default secret for all the scopes and encryptions</td>
</tr>
<tr>
<td>UAA_DEFAULT_USER_EMAIL</td>
<td>admin@example.com</td>
<td>Email address of default admin user</td>
</tr>
<tr>
<td>UAA_DEFAULT_USER_FIRSTNAME</td>
<td>Joe</td>
<td>First name of default admin user</td>
</tr>
<tr>
<td>UAA_DEFAULT_USER_GROUPS</td>
<td>See <a href="#uaa_default_user_groups">here</a></td>
<td>Default user groups of the users</td>
</tr>
<tr>
<td>UAA_DEFAULT_USER_LASTNAME</td>
<td>Admin</td>
<td>Last name of default admin user</td>
</tr>
<tr>
<td>UAA_DEFAULT_USER_PW</td>
<td></td>
<td>Password of default admin user</td>
</tr>
<tr>
<td>UAA_FLEX_USAGE_CLIENT_ID</td>
<td>flex_usage_client</td>
<td>Identity of the Flex usage generator scope in Identity</td>
</tr>
<tr>
<td>UAA_FLEX_USAGE_CLIENT_SECRET</td>
<td>$UAA_DEFAULT_SECRET</td>
<td>Secret of the Flex usage generator scope in Identity</td>
</tr>
<tr>
<td>UAA_PERISCOPE_ID</td>
<td>periscope</td>
<td>Identity of the Autoscale scope in Identity</td>
</tr>
<tr>
<td>UAA_PERISCOPE_SECRET</td>
<td>$UAA_DEFAULT_SECRET</td>
<td>Secret of the Autoscale scope in Identity</td>
</tr>
<tr>
<td>UAA_PORT</td>
<td>8089</td>
<td>Identity service public port</td>
</tr>
<tr>
<td>UAA_SULTANS_ID</td>
<td>sultans</td>
<td>Identity of the Authentication service scope in Identity</td>
</tr>
<tr>
<td>UAA_SULTANS_SECRET</td>
<td>$UAA_DEFAULT_SECRET</td>
<td>Secret of the Authentication service scope in Identity</td>
</tr>
<tr>
<td>UAA_ULUWATU_ID</td>
<td>uluwatu</td>
<td>Identity of the Web UI scope in Identity</td>
</tr>
<tr>
<td>UAA_ULUWATU_SECRET</td>
<td>$UAA_DEFAULT_SECRET</td>
<td>Secret of the Web UI scope in Identity</td>
</tr>
<tr>
<td>UAA_ZONE_DOMAIN</td>
<td>example.com</td>
<td>External domain name for zone in Identity</td>
</tr>
<tr>
<td>ULUWATU_CONTAINER_PATH</td>
<td>/uluwatu</td>
<td>Default project location in the Web UI container</td>
</tr>
<tr>
<td>ULU_DEFAULT_SSH_KEY</td>
<td>""</td>
<td>Default SSH key for the credentials in Cloudbreak</td>
</tr>
<tr>
<td>ULU_HOST_ADDRESS</td>
<td>"https://$PUBLIC_IP"</td>
<td>URL for the Web UI host</td>
</tr>
<tr>
<td>ULU_NODE_TLS_REJECT_UNAUTHORIZED</td>
<td>"0"</td>
<td>When set to "0", enables self-signed certifications in Web UI</td>
</tr>
<tr>
<td>ULU_OAUTH_REDIRECT_URI</td>
<td>"$ULU_HOST_ADDRESS/authorize"</td>
<td>Authorization page on Web UI</td>
</tr>
<tr>
<td>ULU_SUBSCRIBE_TO_NOTIFICATIONS</td>
<td>"false"</td>
<td>Set to “true” to enable email notifications for Cloudbreak events</td>
</tr>
<tr>
<td>ULU_SULTANS_ADDRESS</td>
<td>"https://$PUBLIC_IP/sl"</td>
<td>Authentication service URL</td>
</tr>
<tr>
<td>VERBOSE_MIGRATION</td>
<td>false</td>
<td>When set to true, enables verbose database migration</td>
</tr>
</tbody>
</table>
<h4 id="aws-variables">AWS Variables</h4>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Default Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>AWS_ACCESS_KEY_ID</td>
<td>""</td>
<td>Access key of the AWS account</td>
</tr>
<tr>
<td>AWS_ROLE_NAME</td>
<td>cbreak-deployer</td>
<td>Name of the AWS role for the <code>cbd aws [generate-rol, show role]</code> commands</td>
</tr>
<tr>
<td>AWS_SECRET_ACCESS_KEY</td>
<td>""</td>
<td>Secret access key of the AWS account</td>
</tr>
<tr>
<td>CB_AWS_CUSTOM_CF_TAGS</td>
<td>""</td>
<td>Comma separated list of AWS CloudFormation stack tags</td>
</tr>
<tr>
<td>CB_AWS_DEFAULT_CF_TAG</td>
<td>""</td>
<td>Default tag for AWS CloudFormation stack</td>
</tr>
<tr>
<td>CB_AWS_DEFAULT_INBOUND_SECURITY_GROUP</td>
<td>""</td>
<td>Default inbound policy name for AWS CloudFormation stack</td>
</tr>
<tr>
<td>CB_AWS_EXTERNAL_ID</td>
<td>provision-ambari</td>
<td>External ID of the assume role policy</td>
</tr>
<tr>
<td>CB_AWS_HOSTKEY_VERIFY</td>
<td>"false"</td>
<td>Enables host fingerprint verification on AWS</td>
</tr>
<tr>
<td>CB_AWS_VPC</td>
<td>""</td>
<td>Configures the VPC ID on AWS. Set this variable if you are provisioning cluster to the same VPC where Cloudbreak is deployed on AWS.</td>
</tr>
<tr>
<td>CERTS_BUCKET</td>
<td>""</td>
<td>S3 bucket name for backup and restore certificates via <code>cbd aws [certs-restore-s3  certs-upload-s3]</code> commands</td>
</tr>
</tbody>
</table>
<h4 id="azure-variables">Azure Variables</h4>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Default Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>AZURE_SUBSCRIPTION_ID</td>
<td></td>
<td>Azure subscription ID for interactive login in the web UI</td>
</tr>
<tr>
<td>AZURE_TENANT_ID</td>
<td></td>
<td>Azure tenant ID for interactive login in the web UI</td>
</tr>
</tbody>
</table>
<h4 id="gcp-variables">GCP Variables</h4>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Default Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>CB_GCP_HOSTKEY_VERIFY</td>
<td>"false"</td>
<td>When set to "true", enables host fingerprint verification on GCP</td>
</tr>
</tbody>
</table>
<h4 id="local-development-variables">Local Development Variables</h4>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Default Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>CB_LOCAL_DEV_BIND_ADDR</td>
<td>"192.168.64.1"</td>
<td>Ambassador external address for local development of Cloudbreak and Autoscale</td>
</tr>
<tr>
<td>CB_SCHEMA_SCRIPTS_LOCATION</td>
<td>"container"</td>
<td>Location of Cloudbreak schema update files</td>
</tr>
<tr>
<td>DOCKER_TAG_AMBASSADOR</td>
<td>0.5.0</td>
<td>Ambassador container version for local development</td>
</tr>
<tr>
<td>PERISCOPE_SCHEMA_SCRIPTS_LOCATION</td>
<td>"container"</td>
<td>Location of Cloudbreak schema update files</td>
</tr>
<tr>
<td>PRIVATE_IP</td>
<td>$BRIDGE_IP</td>
<td>IP address or hostname of the private interface</td>
</tr>
<tr>
<td>REMOVE_CONTAINER</td>
<td>"--rm"</td>
<td>When set to "--rm" (default), removes side effect containers for debug purpose. Set to " " to keep side effect containers for debug purpose</td>
</tr>
<tr>
<td>SULTANS_VOLUME_HOST</td>
<td>/dev/null</td>
<td>Location of the locally developed Authentication service project</td>
</tr>
<tr>
<td>UAA_SCHEMA_SCRIPTS_LOCATION</td>
<td>"container"</td>
<td>Location of Identity schema update files</td>
</tr>
<tr>
<td>ULUWATU_VOLUME_HOST</td>
<td>/dev/null</td>
<td>Location of the locally developed web UI project</td>
</tr>
</tbody>
</table>
<h4 id="macos-variables">MacOS Variables</h4>
<table>
<thead>
<tr>
<th>Variable Name</th>
<th>Default Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>DOCKER_MACHINE</td>
<td>""</td>
<td>Name of the Docker Machine where Cloudbreak runs</td>
</tr>
<tr>
<td>DOCKER_PROFILE</td>
<td>Profile</td>
<td>Profile file for environment variables related to Docker Machine</td>
</tr>
<tr>
<td>MACHINE_CPU</td>
<td>2</td>
<td>Number of the CPU cores on the Docker Machine instance</td>
</tr>
<tr>
<td>MACHINE_MEM</td>
<td>4096</td>
<td>Amount of RAM on the Docker Machine instance</td>
</tr>
<tr>
<td>MACHINE_NAME</td>
<td>cbd</td>
<td>Name of the Docker Machine instance</td>
</tr>
<tr>
<td>MACHINE_OPTS</td>
<td>"--xhyve-virtio-9p"</td>
<td>Extra options for Docker Machine instance</td>
</tr>
<tr>
<td>MACHINE_STORAGE_PATH</td>
<td>$HOME/.docker/machine</td>
<td>Docker Machine storage path</td>
</tr>
</tbody>
</table>
<h4 id="uaa_default_user_groups">UAA_DEFAULT_USER_GROUPS</h4>
<p>Default value fro <code>UAA_DEFAULT_USER_GROUPS</code> is:</p>
<pre>"openid,cloudbreak.networks,cloudbreak.securitygroups,cloudbreak.templates,cloudbreak.blueprints,cloudbreak.credentials,cloudbreak.stacks,sequenceiq.cloudbreak.admin,sequenceiq.cloudbreak.user,sequenceiq.account.${UAA_DEFAULT_ACCOUNT},cloudbreak.events,cloudbreak.usages.global,cloudbreak.usages.account,cloudbreak.usages.user,periscope.cluster,cloudbreak.recipes,cloudbreak.blueprints.read,cloudbreak.templates.read,cloudbreak.credentials.read,cloudbreak.recipes.read,cloudbreak.networks.read,cloudbreak.securitygroups.read,cloudbreak.stacks.read,cloudbreak.sssdconfigs,cloudbreak.sssdconfigs.read,cloudbreak.platforms,cloudbreak.platforms.read"</pre>

<h3 id="change-smtp-parameters">Change SMTP Parameters</h3>
<p>If you want to change SMTP parameters, add them your <code>Profile</code>.</p>
<p>The default values of the SMTP parameters are:</p>
<pre><code>export CLOUDBREAK_SMTP_SENDER_USERNAME=
export CLOUDBREAK_SMTP_SENDER_PASSWORD=
export CLOUDBREAK_SMTP_SENDER_HOST=
export CLOUDBREAK_SMTP_SENDER_PORT=25
export CLOUDBREAK_SMTP_SENDER_FROM=
export CLOUDBREAK_SMTP_AUTH=true
export CLOUDBREAK_SMTP_STARTTLS_ENABLE=true
export CLOUDBREAK_SMTP_TYPE=smtp
</code></pre>

<p>If your SMTP server uses SMTPS, you must set the protocol in your <code>Profile</code> to smtps:</p>
<pre><code>export CLOUDBREAK_SMTP_TYPE=smtps
</code></pre>

<h3 id="configure-consul">Configure Consul</h3>
<p>Cloudbreak uses <a href="https://www.consul.io/">Consul</a> for DNS resolution. All Cloudbreak related services are registered as someservice.service.consul.</p>
<p>Consul’s built-in DNS server is able to fallback on another DNS server. This option is called <code>-recursor</code>. Clodbreak Deployer first tries to discover the DNS settings of the host by looking for nameserver entry in the <code>/etc/resolv.conf</code> file. If it finds one, consul will use it as a recursor. Otherwise, it will use <code>8.8.8.8</code>.</p>
<p>For a full list of available consul config options, refer to <a href="https://www.consul.io/docs/agent/options.html">Consul documentation</a>.</p>
<p>To pass any additional Consul configuration, define the <code>DOCKER_CONSUL_OPTIONS</code> variable in the Profile file.</p>
<h3 id="create-environment-specific-profiles">Create Environment Specific Profiles</h3>
<p>If you would like to use a different versions of Cloudbreak for prod and qa profile, you must create two environment specific configurations that can be sourced. For example:</p>
<ul>
<li>Profile.prod  </li>
<li>Profile.qa   </li>
</ul>
<p>For example, to create and use a prod profile, you need to:</p>
<ol>
<li>Create a file called <code>Profile.prod</code>  </li>
<li>Write the environment-specific <code>export DOCKER_TAG_CLOUDBREAK=0.3.99</code> into <code>Profile.prod</code> to specify Docker image.  </li>
<li>Set the environment variable: <code>CBD_DEFAULT_PROFILE=prod</code>  </li>
</ol>
<p>To use the prod specific profile once, set:  </p>
<pre>CBD_DEFAULT_PROFILE=prod cbd some_commands</pre>

<p>To permanently use the prod profile, set <code>export CBD_DEFAULT_PROFILE=prod</code> in your <code>.bash_profile</code>.</p></div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        <p>
        <small>© 2011-2017 <a href="http://www.hortonworks.com" target="_blank">Hortonworks Inc</a>. All Rights Reserved. | <a href="http://hortonworks.com/privacy-policy/" target="_blank">Privacy Policy</a><br></small>
        
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
    </footer>

    <script src="../js/jquery-1.10.2.min.js"></script>
    <script src="../js/bootstrap-3.0.3.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '..';
    </script>
    <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
    <script src="../js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
