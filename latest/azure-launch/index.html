<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <link rel="canonical" href="http://hortonworks.github.io/cloudbreak-documentation/azure-launch/index.html"> 
    <link rel="shortcut icon" href="../images/favicon.png">

    <title>Launch on Azure - Cloudbreak</title>

    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../css/base.css" rel="stylesheet">
    <link href="../css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.css">


    <link href="../css/extra.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
    <script>
    (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-22950817-24', 'auto');
    ga('send', 'pageview');
    </script>
    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../index.html">Cloudbreak</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Get Started <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../index.html">Introduction</a>
</li>

                        
                            
<li >
    <a href="../architecture/index.html">Architecture</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">AWS <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../aws-launch/index.html">Launch on AWS</a>
</li>

                        
                            
<li >
    <a href="../aws-create/index.html">Create a Cluster</a>
</li>

                        
                            
<li >
    <a href="../aws-clusters-access/index.html">Access Cluster</a>
</li>

                        
                            
<li >
    <a href="../aws-clusters-manage/index.html">Manage and Monitor Clusters</a>
</li>

                        
                            
<li >
    <a href="../aws-data/index.html">Access Data on S3</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Azure <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li class="active">
    <a href="index.html">Launch on Azure</a>
</li>

                        
                            
<li >
    <a href="../azure-create/index.html">Create a Cluster</a>
</li>

                        
                            
<li >
    <a href="../azure-clusters-access/index.html">Access Cluster</a>
</li>

                        
                            
<li >
    <a href="../azure-clusters-manage/index.html">Manage and Monitor Clusters</a>
</li>

                        
                            
<li >
    <a href="../azure-data/index.html">Access Data on Azure</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">GCP <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../gcp-launch/index.html">Launch on GCP</a>
</li>

                        
                            
<li >
    <a href="../gcp-create/index.html">Create a Cluster</a>
</li>

                        
                            
<li >
    <a href="../gcp-clusters-access/index.html">Access Cluster</a>
</li>

                        
                            
<li >
    <a href="../gcp-clusters-manage/index.html">Manage and Monitor Clusters</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">OpenStack <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../os-launch/index.html">Launch on Open Stack</a>
</li>

                        
                            
<li >
    <a href="../os-create/index.html">Create a Cluster</a>
</li>

                        
                            
<li >
    <a href="../os-clusters-access/index.html">Access Cluster</a>
</li>

                        
                            
<li >
    <a href="../os-clusters-manage/index.html">Manage and Monitor Clusters</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Using Cloudbreak <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Advanced Cluster Options</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../blueprints/index.html">Blueprints</a>
</li>

        
            
<li >
    <a href="../recipes/index.html">Recipes</a>
</li>

        
            
<li >
    <a href="../tags/index.html">Resource Tagging</a>
</li>

        
            
<li >
    <a href="../images/index.html">Custom Images</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Managing Cloudbreak</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../vm-launch/index.html">Install on Your Own VM</a>
</li>

        
            
<li >
    <a href="../cb-delete/index.html">Delete Cloudbreak</a>
</li>

        
            
<li >
    <a href="../cb-credentials/index.html">Manage Cloudbreak Credentials</a>
</li>

        
            
<li >
    <a href="../cb-disable-provider/index.html">Disable Providers</a>
</li>

        
            
<li >
    <a href="../cb-db/index.html">Configure External Cloudbreak Database</a>
</li>

        
            
<li >
    <a href="../cb-migrate/index.html">Move Cloudbreak Instance</a>
</li>

        
            
<li >
    <a href="../cb-profile/index.html">Edit Cloudbreak Profile</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Security</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../security/index.html">Security Overview</a>
</li>

        
            
<li >
    <a href="../security-cb/index.html">Configure Basic Security</a>
</li>

        
            
<li >
    <a href="../security-kerberos/index.html">Configure Kerberos</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">CLI</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../cli-install/index.html">Install the CLI</a>
</li>

        
            
<li >
    <a href="../cli-reference/index.html">CLI Reference</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Troubleshooting</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../trouble-cb-logs/index.html">Cloudbreak Logs</a>
</li>

        
            
<li >
    <a href="../trouble-cb/index.html">General Troubleshooting</a>
</li>

        
            
<li >
    <a href="../trouble-aws/index.html">Troubleshooting AWS</a>
</li>

        
            
<li >
    <a href="../trouble-azure/index.html">Troubleshooting Azure</a>
</li>

        
            
<li >
    <a href="../trouble-gcp/index.html">Troubleshooting GCP</a>
</li>

        
            
<li >
    <a href="../trouble-os/index.html">Troubleshooting OpenStack</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../dev/index.html">Developer Documentation</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">More <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../releasenotes/index.html">Release Notes</a>
</li>

                        
                            
<li >
    <a href="../faq/index.html">FAQs</a>
</li>

                        
                            
<li >
    <a href="../get-help/index.html">Getting Help</a>
</li>

                        
                            
<li >
    <a href="../smartsense/index.html">SmartSense</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Legal</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../acknowledge/index.html">Acknowledgements</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                
                    <li >
                        <a rel="next" href="../aws-data/index.html">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../azure-create/index.html">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/hortonworks/cloudbreak-documentation">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="first-level active"><a href="#launching-cloudbreak-on-azure">Launching Cloudbreak on Azure</a></li>
        
            <li class="second-level"><a href="#meet-the-prerequisites">Meet the Prerequisites</a></li>
            
                <li class="third-level"><a href="#azure-account">Azure Account</a></li>
            
                <li class="third-level"><a href="#azure-roles">Azure Roles</a></li>
            
                <li class="third-level"><a href="#azure-region">Azure Region</a></li>
            
                <li class="third-level"><a href="#ssh-key-pair">SSH Key Pair</a></li>
            
        
            <li class="second-level"><a href="#launch-cloudbreak">Launch Cloudbreak</a></li>
            
        
            <li class="second-level"><a href="#explore-newly-created-resources">Explore Newly Created Resources</a></li>
            
        
            <li class="second-level"><a href="#access-cloudbreak-ui">Access Cloudbreak UI</a></li>
            
        
            <li class="second-level"><a href="#create-cloudbreak-credential">Create Cloudbreak Credential</a></li>
            
                <li class="third-level"><a href="#create-an-interactive-credential">Create an Interactive Credential</a></li>
            
                <li class="third-level"><a href="#create-an-app-based-credential">Create an App Based Credential</a></li>
            
        
    
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h2 id="launching-cloudbreak-on-azure">Launching Cloudbreak on Azure</h2>
<p>Before launching Cloudbreak on Azure, review and meet the prerequisites. Next, launch Cloudbreak using one of the two available methods. Once Cloudbreak is running, log in to the Cloudbreak UI and create a Cloudbreak credential. </p>
<h3 id="meet-the-prerequisites">Meet the Prerequisites</h3>
<p>Before launching Cloudbreak on Azure, you must meet the following prerequisites.</p>
<h4 id="azure-account">Azure Account</h4>
<p>In order to launch Cloudbreak on the Azure, log in to your existing Microsoft Azure account. If you don't have an account, you can set it up at <a href="https://azure.microsoft.com">https://azure.microsoft.com</a>.</p>
<h4 id="azure-roles">Azure Roles</h4>
<p>In order to provision clusters on Azure, Cloudbreak must be able to assume a sufficient Azure role ("Owner" or "Contributor") via Cloudbreak credential: </p>
<ul>
<li>
<p>Your account must have the "<a href="https://docs.microsoft.com/en-us/azure/active-directory/role-based-access-built-in-roles#owner">Owner</a>" role (or a role with equivalent permissions) in the subscription in order to <a href="#create-cloudbreak-credential">create a Cloudbreak credential</a> using the interactive credential method. </p>
</li>
<li>
<p>Your account must have the "<a href="https://docs.microsoft.com/en-us/azure/active-directory/role-based-access-built-in-roles#contributor">Contributor</a>" role (or a role with equivalent permissions) in the subscription in order to <a href="#create-cloudbreak-credential">create a Cloudbreak credential</a> using the app-based credential method. The role must be assigned to the app that you register in Cloudbreak.</p>
</li>
</ul>
<p>To check the roles in your subscription, log in to your Azure account and navigate to <strong>Subscriptions</strong>. </p>
<p><strong>Related Links</strong><br />
<a href="https://docs.microsoft.com/en-us/azure/active-directory/role-based-access-built-in-roles#owner">Built-in Roles: Owner</a> (External)<br />
<a href="https://docs.microsoft.com/en-us/azure/active-directory/role-based-access-built-in-roles#contributor">Built-in Roles: Contributor</a> (External)</p>
<h4 id="azure-region">Azure Region</h4>
<p>Decide in which Azure region you would like to launch Cloudbreak. You can launch Cloudbreak and provision your clusters in all regions <a href="https://azure.microsoft.com/en-us/regions/">supported by Microsoft Azure</a>. </p>
<p>Clusters created via Cloudbreak can be in the same or different region as Cloudbreak; when you launch a cluster, you select the region in which to launch it.</p>
<p><strong>Related Links</strong><br />
<a href="https://azure.microsoft.com/en-us/regions/">Azure Regions</a> (External) </p>
<h4 id="ssh-key-pair">SSH Key Pair</h4>
<p>When launching Cloudbreak, you will be required to provide your public SSH key. If needed, you can generate a new SSH keypair:</p>
<ul>
<li>On MacOS X and Linux using <code>ssh-keygen -t rsa -b 4096 -C "your_email@example.com"</code>  </li>
<li>On Windows using <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/ssh-from-windows">PuTTygen</a></li>
</ul>
<h3 id="launch-cloudbreak">Launch Cloudbreak</h3>
<p>Launch Cloudbreak deployer using the following steps.</p>
<p><strong>Steps</strong></p>
<ol>
<li>
<p>Log in to your <a href="https://portal.azure.com">Azure Portal</a>.</p>
</li>
<li>
<p>Click here to get started with Cloudbreak installation using the Azure Resource Manager template:</p>
<p><a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fhortonworks%2Fazure-cbd-quickstart%2F2.1.0%2FmainTemplate.json" target="_blank"> <img alt="deploy on azure" src="http://azuredeploy.net/deploybutton.png" /></a></p>
</li>
<li>
<p>The template for installing Cloudbreak will appear. On the <strong>Basics</strong> page, provide the following basic parameters:   </p>
<p><strong>BASICS</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Subscription</td>
<td>(Required) Select which existing subscription you want to use.</td>
</tr>
<tr>
<td>Resource group</td>
<td>(Required) Select an existing resource group or create a new one by selecting <strong>Create new</strong> and entering a name for your new resource group. Cloudbreak resources will later be accessible in that chosen resource group.</td>
</tr>
<tr>
<td>Location</td>
<td>(Required) Select an Azure region in which you want to deploy Cloudbreak.</td>
</tr>
</tbody>
</table>
<p><strong>SETTINGS</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Base Url</td>
<td>This is the URL to the page where the template is stored.</td>
</tr>
<tr>
<td>Location</td>
<td>This is an internal parameter. Do not change it.</td>
</tr>
<tr>
<td>VM Size</td>
<td>Select virtual machine instance type to use for the Cloudbreak controller. The minimum instance type suitable for Cloudbreak is <em>D2</em>.</td>
</tr>
<tr>
<td>Admin Username</td>
<td>Create an admin login that you will use to log in to the Cloudbreak UI. Must be a valid email address.</td>
</tr>
<tr>
<td>Admin User Password</td>
<td>(Required) Password for the admin login. Must be at least 8 characters containing letters, numbers, and symbols.</td>
</tr>
<tr>
<td>Username</td>
<td>Enter an admin username for the virtual machine. You will use it to SSH to the VM.</td>
</tr>
<tr>
<td>SmartSense</td>
<td>Select whether you want to use SmartSense telemetry. Default is "false" (not using SmartSense telemetry).</td>
</tr>
<tr>
<td>Remote Location</td>
<td><p>Enter a valid <a href="http://www.ipaddressguide.com/cidr">CIDR IP</a> or use one of the default tags. Default value is <code>Internet</code> which allows access from all IP addresses. Examples: </p><p><ul><li>10.0.0.0/24 will allow access from 10.0.0.0 through 10.0.0.255</li><li>'Internet' will allow access from all. This is not a secure option but you can use it it you are just getting started and are not planning to have the instance on for a longer period. </li><li>(Advanced) 'VirtualNetwork' will allow access from the address space of the Virtual Network.</li><li> (Advanced) 'AzureLoadBalancer' will allow access from the address space of the load balancer.</li></ul></p><p>For more information, refer to the <a href="https://docs.microsoft.com/en-us/azure/virtual-network/virtual-networks-nsg">Azure documentation</a>.</p></td>
</tr>
<tr>
<td>Ssh Key</td>
<td><p>(Required) Paste your SSH public key.</p><p>You can use <code>pbcopy</code> to quickly copy it. For example: <code>pbcopy &lt; /Users/homedir/.ssh/id_rsa.pub</code></p></td>
</tr>
<tr>
<td>Vnet New Or Existing</td>
<td>By default, Cloudbreak is launched in a new VNet called <code>cbdeployerVnet</code> and a new subnet called <code>cbdeployerSubnet</code>; if needed, you can customize the settings for the new VNet using available VNet and Subnet parameters.</td>
</tr>
<tr>
<td>Vnet Name</td>
<td>Provide the name for a new Vnet. Default is <code>`cbdeployerVnet</code>.</td>
</tr>
<tr>
<td>Vnet Subnet Name</td>
<td>Provide a name for a new subnet. Default is <code>cbdeployerSubnet</code>.</td>
</tr>
<tr>
<td>Vnet Address Prefix</td>
<td>Provide a CIDR for the virtual network. Default is <code>10.0.0.0/16</code>.</td>
</tr>
<tr>
<td>Vnet Subnet Address Prefix</td>
<td>Provide a CIDR for the subnet. Default is <code>10.0.0.0/24</code>.</td>
</tr>
<tr>
<td>Vnet RG Name</td>
<td>The name of the resource group in which the Vnet is located. If creating a new Vnet, enter the same resource group name as provided in the <code>Resource group</code> field in the <strong>BASICS</strong> section.</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Review terms of use and check "I agree to the terms and conditions stated above". </p>
</li>
<li>
<p>Click <strong>Purchase</strong>.</p>
</li>
<li>
<p>Proceed to the next step: <a href="#explore-newly-created-resources">Explore Newly Created Resources</a>.</p>
</li>
</ol>
<p><strong>Related Links</strong><br />
<a href="http://www.ipaddressguide.com/cidr">CIDR IP</a> (External) <br />
<a href="https://docs.microsoft.com/en-us/azure/virtual-network/virtual-networks-nsg">Filter Network Traffic with Network Security Groups</a> (External)  </p>
<h3 id="explore-newly-created-resources">Explore Newly Created Resources</h3>
<blockquote>
<p>This step is optional. </p>
</blockquote>
<p>While the deployment is in progress, you can optionally navigate to the newly created resource group and see what Azure resources are being provisioned.</p>
<p><strong>Steps</strong></p>
<ol>
<li>
<p>From the left pane, select <strong>Resource groups</strong>.</p>
</li>
<li>
<p>Find the the resource group that you just created and select it to view details.</p>
</li>
<li>
<p>The following resources should have been created in your resource group:</p>
<p><a href="../images/azure-resources.png" target="_blank" title="click to enlarge"><img src="../images/azure-resources.png" width="650" title="Azure Portal"></a></p>
<blockquote>
<p>If you chose to use an existing virtual network, the virtual network will not be added to the resource group. </p>
</blockquote>
<ul>
<li><a href="https://docs.microsoft.com/en-us/azure/virtual-network/virtual-networks-overview">Virtual network</a> (VNet) securely connects Azure resources to each other.    </li>
<li><a href="https://docs.microsoft.com/en-us/azure/virtual-network/virtual-networks-nsg">Network security group</a> (NSG) defines inbound and outbound security rules, which control network traffic flow.  </li>
<li><a href="https://docs.microsoft.com/en-us/azure/virtual-machines/virtual-machines-linux-azure-overview?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json">Virtual machine</a> runs Cloudbreak.   </li>
<li><a href="https://docs.microsoft.com/en-us/azure/virtual-network/virtual-network-ip-addresses-overview-arm">Public IP address</a> is assigned to your VM so that it can communicate with other Azure resources.  </li>
<li><a href="https://docs.microsoft.com/en-us/azure/virtual-network/virtual-network-network-interface">Network interface</a> (NIC) attached to the VM provides the interconnection between the VM and the underlying software network.    </li>
<li><a href="https://docs.microsoft.com/en-us/azure/storage/storage-introduction">Blob storage container</a> is created to store Cloudbreak Deployer OS disk's data.  </li>
</ul>
</li>
<li>
<p>You can click on each entry to view details of the resource. For example, click on <strong>cbdeployerVM</strong> to view details, including Cloudbreak IP address.</p>
</li>
<li>
<p>Once your deployment is ready, the status will change from "Deploying" to "Success".</p>
</li>
</ol>
<h3 id="access-cloudbreak-ui">Access Cloudbreak UI</h3>
<p>Log in to the Cloudbreak UI using the following steps.</p>
<p><strong>Steps</strong></p>
<ol>
<li>
<p>When your deployment succeeds, you will receive a notification in the top-right corner. You can click on the link provided to navigate to the resource group created earlier.</p>
<blockquote>
<p>This only works right after deployment. At other times, you can find your resource group by selecting <strong>Resource Groups</strong> from the service menu and then finding your resource group by name.</p>
</blockquote>
</li>
<li>
<p>Once you've navigated to your resource group, click on <strong>Deployments</strong> and then click on <strong>Microsoft.Template</strong>:</p>
<p><a href="../images/azure-resource-find.png" target="_blank" title="click to enlarge"><img src="../images/azure-resource-find.png" width="650" title="Azure Portal"></a> </p>
</li>
<li>
<p>From <strong>Outputs</strong>, you can copy the link by clicking on the copy icon:</p>
<p><a href="../images/azure-outputs.png" target="_blank" title="click to enlarge"><img src="../images/azure-outputs.png" width="650" title="Azure Portal"></a>   </p>
</li>
<li>
<p>Paste the link in your browser's address bar.</p>
<p>The first time you access Cloudbreak UI, Cloudbreak will automatically generate a self-signed certificate, due to which your browser will warn you about an untrusted connection and will ask you to confirm a security exception. You can safely proceed to the website. </p>
<table>
<thead>
<tr>
<th>Browser</th>
<th>Steps</th>
</tr>
</thead>
<tbody>
<tr>
<td>Firefox</td>
<td>Click <strong>Advanced</strong> &gt; Click <strong>Add Exception...</strong> &gt; Click <strong>Confirm Security Exception</strong></td>
</tr>
<tr>
<td>Safari</td>
<td>Click <strong>Continue</strong></td>
</tr>
<tr>
<td>Chrome</td>
<td>Click <strong>Advanced</strong> &gt; Click <strong>Proceed...</strong></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Now you should be able to access Cloudbreak UI and log in with the <strong>Admin email address</strong> and <strong>Admin password</strong> that you created when launching Cloudbreak:</p>
<p><a href="../images/cb-ui.png" target="_blank" title="click to enlarge"><img src="../images/cb-ui.png" width="650" title="Azure Portal"></a></p>
</li>
<li>
<p>Upon a successful login, you are redirected to the dashboard:</p>
<p><a href="../images/cb-ui1.png" target="_blank" title="click to enlarge"><img src="../images/cb-ui1.png" width="650" title="Cloudbreak web UI"></a>  </p>
</li>
</ol>
<p>The last task that you need to perform before you can use Cloudbreak is to <a href="#create-cloudbreak-credential">create a cloudbreak credential</a>.         </p>
<h3 id="create-cloudbreak-credential">Create Cloudbreak Credential</h3>
<p>Before you can start creating clusters, you must first create a <a href="../architecture/index.html#cloudbreak-credential">Cloudbreak credential</a>. Without this credential, you will not be able to create clusters via Cloudbreak. Cloudbreak works by connecting your Azure account through this credential, and then uses it to create resources on your behalf.</p>
<p>There are two methods for creating a Cloudbreak credential:</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
<th>Prerequisite</th>
<th>Steps</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Interactive</strong></td>
<td>The advantage of using this method is that the app and service principal creation and role assignment are fully automated, so the only input that you need to provide is the Subscription ID and Directory ID. During the interactive credential creation, you are required to log in to your Azure account.</td>
<td>(1) Your account must have the "Owner" role (or its equivalent) in the subscription. (2) You must be able log in to your Azure account.</td>
<td>To configure an interactive credential, refer to <a href="#create-an-interactive-credential">Create an Interactive Credential</a>.</td>
</tr>
<tr>
<td><strong>App-based</strong></td>
<td>The advantage of the app-based credential creation is that it allows you to create a credential without logging in to the Azure account, as long as you have been given all the information. In addition to providing your Subscription ID and  Directory ID, you must provide information for your previously created Azure AD application (its ID and key which allows access to it).</td>
<td>(1) Your account must have the "Contributor" role (or equivalent) in the subscription. (2) The "Contributor" role must be assigned to the app that you registered in Cloudbreak (this step must be preformed by someone with an Owner role).</td>
<td>To configure an app based credential, refer to <a href="#create-an-app-based-credential">Create an App Based Credential</a>.</td>
</tr>
</tbody>
</table>
<h4 id="create-an-interactive-credential">Create an Interactive Credential</h4>
<p>Follow these steps to create an interactive Cloudbreak credential.</p>
<p><strong>Steps</strong></p>
<ol>
<li>
<p>In the Cloudbreak web UI, select <strong>Credentials</strong> from the navigation pane. </p>
</li>
<li>
<p>Click <strong>Create Credential</strong>. </p>
</li>
<li>
<p>Under <strong>Cloud provider</strong>, select "Microsoft Azure". </p>
</li>
<li>
<p>Select <strong>Interactive Login</strong>:</p>
<p><a href="../images/cb-azure-cred-inter.png" target="_blank" title="click to enlarge"><img src="../images/cb-azure-cred-inter.png" width="650" title="Cloudbreak web UI"></a>     </p>
</li>
<li>
<p>Provide the following information:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Name</td>
<td>Enter a name for your credential.</td>
</tr>
<tr>
<td>Description</td>
<td>(Optional) Enter a description.</td>
</tr>
<tr>
<td>Subscription Id</td>
<td>Copy and paste the Subscription ID from your <strong>Subscriptions</strong>.</td>
</tr>
<tr>
<td>Tenant Id</td>
<td>Copy and paste your Directory ID from your <strong>Active Directory</strong> &gt; <strong>Properties</strong>.</td>
</tr>
<tr>
<td>Azure role type</td>
<td><p>You have the following options:<ul><li>"Use existing Contributor role" (default): If you select this option, Cloudbreak will use the "<a href="https://docs.microsoft.com/en-us/azure/active-directory/role-based-access-built-in-roles#contributor">Contributor</a>" role to create resources. This requires no further input.</li><li>"Reuse existing custom role": If you select this option and enter the name of an existing role, Cloudbreak will use this role to create resources.</li><li>"Let Cloudbreak create a custom role": If you select this option and enter a name for the new role, the role will be created. When choosing role name, make sure that there is no existing role with the name chosen. For information on creating custom roles, refer to <a href="https://docs.microsoft.com/en-us/azure/active-directory/role-based-access-control-custom-roles">Azure</a> documentation. </li></ul></p><p>If using a custom role, make sure that it includes the necessary Action set for Cloudbreak to be able to manage clusters: <code>Microsoft.Compute/*</code>, <code>Microsoft.Network/*</code>, <code>Microsoft.Storage/*</code>, <code>Microsoft.Resources/*</code>.</p></td>
</tr>
</tbody>
</table>
<p>To obtain the <strong>Subscription Id</strong>: </p>
<p><a href="../images/azure-cred-subscription.png" target="_blank" title="click to enlarge"><img src="../images/azure-cred-subscription.png" width="650" title="Cloudbreak web UI"></a>   </p>
<p>To obtain the <strong>Tenant ID</strong> (actually <strong>Directory Id</strong>): </p>
<p><a href="../images/azure-cred-directoryid.png" target="_blank" title="click to enlarge"><img src="../images/azure-cred-directoryid.png" width="650" title="Cloudbreak web UI"></a>    </p>
</li>
<li>
<p>After providing the parameters, click <strong>Interactive Login</strong>.</p>
</li>
<li>
<p>Copy the code provided in the UI:</p>
<p><a href="../images/cb-azure-cred-inter2.png" target="_blank" title="click to enlarge"><img src="../images/cb-azure-cred-inter2.png" width="650" title="Cloudbreak web UI"></a>     </p>
</li>
<li>
<p>Click <strong>Azure login</strong> and a new <strong>Device login</strong> page will open in a new browser tab:</p>
<p><a href="../images/azure-device-login.png" target="_blank" title="click to enlarge"><img src="../images/azure-device-login.png" width="650" title="Azure Portal"></a>  </p>
</li>
<li>
<p>Next, paste the code in field on the  <strong>Device login</strong> page and click <strong>Continue</strong>.</p>
</li>
<li>
<p>Confirm your account by selecting it:</p>
<p><a href="../images/azure-device-login2.png" target="_blank" title="click to enlarge"><img src="../images/azure-device-login2.png" width="650" title="Azure Portal"></a></p>
</li>
<li>
<p>A confirmation page will appear, confirming that you have signed in to the Microsoft Azure Cross-platform Command Line Interface application on your device. You may now close this window.</p>
<p>Congratulations! You've successfully launched and configured Cloudbreak. Now you can use Cloudbreak to <a href="../azure-create/index.html">create clusters</a>.</p>
</li>
</ol>
<h4 id="create-an-app-based-credential">Create an App Based Credential</h4>
<p>Follow these steps to create an app based Cloudbreak credential.</p>
<blockquote>
<p>The role assignment step in prerequisites must be preformed by a user with an "Owner" role.</p>
</blockquote>
<p><strong>Prerequisites</strong></p>
<ol>
<li>
<p>On Azure Portal, navigate to the <strong>Active Directory</strong> &gt; <strong>App Registrations</strong> and register a new application. For more information, refer to <a href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-create-service-principal-portal">Create an Azure AD Application</a>.</p>
<blockquote>
<p>Aa an alternative to the steps listed below for creating an application registration, you use a utility called <code>azure-cli-tools</code>. The utility supports app creation and role assignment. It is available at <a href="https://github.com/sequenceiq/azure-cli-tools/blob/master/cli_tools">https://github.com/sequenceiq/azure-cli-tools/blob/master/cli_tools</a>.</p>
</blockquote>
<p><a href="../images/azure-appbased01.png" target="_blank" title="click to enlarge"><img src="../images/azure-appbased01.png" width="650" title="Cloudbreak web UI"></a>  </p>
</li>
<li>
<p>Navigate to the <strong>Subscriptions</strong>, choose <strong>Access control (IAM)</strong>. Click <strong>Add</strong> and then assign the "Contributor" role to your newly created application by selecting "Contributor" under <strong>Role</strong> and your app name under <strong>Select</strong>:</p>
<p><a href="../images/azure-appbased03.png" target="_blank" title="click to enlarge"><img src="../images/azure-appbased03.png" width="650" title="Azure Portal"></a>   </p>
</li>
</ol>
<p><strong>Steps</strong></p>
<ol>
<li>
<p>In the Cloudbreak web UI, select <strong>Credentials</strong> from the navigation pane. </p>
</li>
<li>
<p>Click <strong>Create Credential</strong>. </p>
</li>
<li>
<p>Under <strong>Cloud provider</strong>, select "Microsoft Azure". </p>
</li>
<li>
<p>Select <strong>App based Login</strong>:</p>
<p><a href="../images/cb-azure-cred-app.png" target="_blank" title="click to enlarge"><img src="../images/cb-azure-cred-app.png" width="650" title="Cloudbreak web UI"></a> </p>
</li>
<li>
<p>On the <strong>Configure credential</strong> page, provide the following parameters:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Select Credential Type</td>
<td>Select <strong>App based</strong>.</td>
</tr>
<tr>
<td>Name</td>
<td>Enter a name for your credential.</td>
</tr>
<tr>
<td>Description</td>
<td>(Optional) Enter a description.</td>
</tr>
<tr>
<td>Subscription Id</td>
<td>Copy and paste the Subscription ID from your <strong>Subscriptions</strong>.</td>
</tr>
<tr>
<td>Tenant Id</td>
<td>Copy and paste your Directory ID from your <strong>Active Directory</strong> &gt; <strong>Properties</strong>.</td>
</tr>
<tr>
<td>App Id</td>
<td>Copy and paste the Application ID from your <strong>Azure Active Directory</strong> &gt; <strong>App Registrations</strong> &gt; your app registration's <strong>Settings</strong> &gt; <strong>Properties</strong>.</td>
</tr>
<tr>
<td>Password</td>
<td>This is your application key. You can generate it from your from your <strong>Azure Active Directory</strong> app registration's <strong>Settings</strong> &gt; <strong>Keys</strong>.</td>
</tr>
</tbody>
</table>
<p>To obtain the <strong>Subscription Id</strong> from Subscriptions: </p>
<p><a href="../images/azure-cred-subscription.png" target="_blank" title="click to enlarge"><img src="../images/azure-cred-subscription.png" width="650" title="Cloudbreak web UI"></a>   </p>
<p>To obtain the <strong>App ID</strong> (actually <strong>Application ID</strong>) and an application key from Azure Active Directory: </p>
<p><a href="../images/azure-cred-app11.png" target="_blank" title="click to enlarge"><img src="../images/azure-cred-app11.png" width="650" title="Cloudbreak web UI"></a>  </p>
<p><a href="../images/azure-cred-app12.png" target="_blank" title="click to enlarge"><img src="../images/azure-cred-app12.png" width="650" title="Cloudbreak web UI"></a>      </p>
<p>To obtain the <strong>Tenant ID</strong> (actually <strong>Directory Id</strong>) from Azure Active Directory: </p>
<p><a href="../images/azure-cred-directoryid.png" target="_blank" title="click to enlarge"><img src="../images/azure-cred-directoryid.png" width="650" title="Cloudbreak web UI"></a>  </p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
<p>Congratulations! You have successfully launched Cloudbreak and created a Cloudbreak credential. Now you can use Cloudbreak to <a href="../azure-create/index.html">create clusters</a>.</p>
</li>
</ol>
<p><strong>Related Links</strong><br />
<a href="https://github.com/hortonworks/cloudbreak-azure-cli-tools/blob/master/cli_tools">CLI Tools</a> (Hortonworks)  <br />
<a href="https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-create-service-principal-portal">Use Portal to Create an Azure Active Directory Application</a> (External)     </p>
<div class="next">
<a href="../azure-create/index.html">Next: Create a Cluster</a>
</div></div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        <p>
        <small>Â© 2011-2017 <a href="http://www.hortonworks.com" target="_blank">Hortonworks Inc</a>. All Rights Reserved. | <a href="http://hortonworks.com/privacy-policy/" target="_blank">Privacy Policy</a><br></small>
        
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
    </footer>

    <script src="../js/jquery-1.10.2.min.js"></script>
    <script src="../js/bootstrap-3.0.3.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '..';
    </script>
    <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
    <script src="../js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
