<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <link rel="canonical" href="http://hortonworks.github.io/cloudbreak-documentation/azure-create/index.html"> 
    <link rel="shortcut icon" href="../images/favicon.png">

    <title>Create a Cluster - Cloudbreak</title>

    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../css/base.css" rel="stylesheet">
    <link href="../css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.css">


    <link href="../css/extra.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
    <script>
    (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-22950817-24', 'auto');
    ga('send', 'pageview');
    </script>
    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../index.html">Cloudbreak</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Get Started <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../index.html">Introduction</a>
</li>

                        
                            
<li >
    <a href="../architecture/index.html">Architecture</a>
</li>

                        
                            
<li >
    <a href="../releasenotes/index.html">Release Notes</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">AWS <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../aws-launch/index.html">Launch on AWS</a>
</li>

                        
                            
<li >
    <a href="../aws-create/index.html">Create a Cluster</a>
</li>

                        
                            
<li >
    <a href="../aws-data/index.html">Access Data on S3</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Azure <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../azure-launch/index.html">Launch on Azure</a>
</li>

                        
                            
<li class="active">
    <a href="index.html">Create a Cluster</a>
</li>

                        
                            
<li >
    <a href="../azure-data/index.html">Access Data on Azure</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">GCP <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../gcp-launch/index.html">Launch on GCP</a>
</li>

                        
                            
<li >
    <a href="../gcp-create/index.html">Create a Cluster</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">OpenStack <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../os-launch/index.html">Launch on Open Stack</a>
</li>

                        
                            
<li >
    <a href="../os-create/index.html">Create a Cluster</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Config & Admin <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../clusters-access/index.html">Access Cluster</a>
</li>

                        
                            
<li >
    <a href="../clusters-manage/index.html">Manage and Monitor Cluster</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Configure Cluster</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../blueprints/index.html">Blueprints</a>
</li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Templates</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../templates-aws/index.html">Templates for AWS</a>
</li>

        
            
<li >
    <a href="../templates-azure/index.html">Templates for Azure</a>
</li>

        
            
<li >
    <a href="../templates-gcp/index.html">Templates for GCP</a>
</li>

        
            
<li >
    <a href="../templates-os/index.html">Templates for OpenStack</a>
</li>

        
    </ul>
  </li>

        
            
<li >
    <a href="../recipes/index.html">Recipes</a>
</li>

        
            
<li >
    <a href="../tags/index.html">Resource Tagging</a>
</li>

        
            
<li >
    <a href="../autoscaling/index.html">Auto Scaling</a>
</li>

        
            
<li >
    <a href="../images/index.html">Custom Images</a>
</li>

        
            
<li >
    <a href="../ambari-db/index.html">Ambari Database</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Configure Security</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../security/index.html">Network and Security</a>
</li>

        
            
<li >
    <a href="../security-cb/index.html">Secure Cloudbreak after Launch</a>
</li>

        
            
<li >
    <a href="../security-ldap/index.html">Use LDAP/AD for Cloudbreak</a>
</li>

        
            
<li >
    <a href="../security-kerberos/index.html">Use Kerberos for Your Cluster</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Manage Cloudbreak</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../vm-launch/index.html">Install on Your Own VM</a>
</li>

        
            
<li >
    <a href="../credentials/index.html">Manage Cloudbreak Credentials</a>
</li>

        
            
<li >
    <a href="../cb-account/index.html">Manage Your Account</a>
</li>

        
            
<li >
    <a href="../upgrade/index.html">Upgrade Clodbreak</a>
</li>

        
            
<li >
    <a href="../delete/index.html">Delete Cloudbreak</a>
</li>

        
            
<li >
    <a href="../profile/index.html">Configure Profile Variables</a>
</li>

        
            
<li >
    <a href="../cb-db/index.html">Manage Cloudbreak Database</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">More <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Troubleshooting</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../trouble-cb/index.html">General Troubleshooting</a>
</li>

        
            
<li >
    <a href="../trouble-aws/index.html">Troubleshooting AWS</a>
</li>

        
            
<li >
    <a href="../trouble-azure/index.html">Troubleshooting Azure</a>
</li>

        
            
<li >
    <a href="../trouble-gcp/index.html">Troubleshooting GCP</a>
</li>

        
            
<li >
    <a href="../trouble-os/index.html">Troubleshooting OpenStack</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../cb-shell/index.html">Cloudbreak Shell</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Developer</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../dev-local-dev/index.html">Set up Local Environment</a>
</li>

        
            
<li >
    <a href="../dev-spi/index.html">Cloudbreak SPI</a>
</li>

        
            
<li >
    <a href="../dev-api/index.html">Cloudbreak APIs</a>
</li>

        
            
<li >
    <a href="../dev-flows/index.html">Flow Diagrams</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../faq/index.html">FAQs</a>
</li>

                        
                            
<li >
    <a href="../get-help/index.html">Getting Help</a>
</li>

                        
                            
<li >
    <a href="../smartsense/index.html">SmartSense</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                
                    <li >
                        <a rel="next" href="../azure-launch/index.html">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../azure-data/index.html">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/hortonworks/cloudbreak-documentation">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="first-level active"><a href="#create-a-cluster-on-azure">Create a Cluster on Azure</a></li>
        
            <li class="second-level"><a href="#optional-prerequisites">Optional Prerequisites</a></li>
            
        
            <li class="second-level"><a href="#basic-options">Basic Options</a></li>
            
        
            <li class="second-level"><a href="#advanced-options">Advanced Options</a></li>
            
                <li class="third-level"><a href="#configure-cluster">Configure Cluster</a></li>
            
                <li class="third-level"><a href="#choose-blueprint">Choose Blueprint</a></li>
            
                <li class="third-level"><a href="#add-file-system">Add File System</a></li>
            
                <li class="third-level"><a href="#choose-failure-action">Choose Failure Action</a></li>
            
                <li class="third-level"><a href="#configure-ambari-repos">Configure Ambari Repos</a></li>
            
                <li class="third-level"><a href="#configure-hdp-repos">Configure HDP Repos</a></li>
            
                <li class="third-level"><a href="#configure-ambari-database">Configure Ambari Database</a></li>
            
                <li class="third-level"><a href="#availability-sets">Availability Sets</a></li>
            
        
    
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h2 id="create-a-cluster-on-azure">Create a Cluster on Azure</h2>
<h3 id="optional-prerequisites">Optional Prerequisites</h3>
<p>If you are just getting started with Cloudbreak, follow the steps below to create a cluster using the default blueprints and infrastructure templates. If you are already familiar with Cloudbreak, review the <a href="../blueprints/index.html">Blueprints</a> and <a href="../templates-azure/index.html">Templates</a> documentation to customize your blueprints and infrastructure templates.  </p>
<h3 id="basic-options">Basic Options</h3>
<p>Use the steps to create a cluster.</p>
<ol>
<li>
<p>Log in to the Cloudbreak UI.</p>
</li>
<li>
<p>In the top right corner, select the credential that you want to use to create a cluster:</p>
<p><a href="../images/cb-ui-credential.png" target="_blank" title="click to enlarge"><img src="../images/cb-ui-credential.png" width="650" title="Azure Portal"></a>  </p>
</li>
<li>
<p>Click <strong>+create cluster</strong> and the <em>Create cluster</em> form is displayed.</p>
</li>
<li>
<p>On the <strong>Configure Cluster</strong> page, provide the following parameters:</p>
<blockquote>
<p>To view advanced options, click <strong>Show Advanced Options</strong>. To learn about advanced options, refer to <a href="#advanced-options">Advanced Options</a>.</p>
</blockquote>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cluster Name</td>
<td>Enter a name for your cluster. The name must be between 5 and 40 characters, must start with a letter, must only include lowercase letters, numbers, and hyphens.</td>
</tr>
<tr>
<td>Tags</td>
<td>(Optional) You can optionally add tags, which will help you find your cluster-related resources, such as VMs, in your cloud provider account.</td>
</tr>
<tr>
<td>Region</td>
<td>Select the region in which you would like to launch your cluster.</td>
</tr>
<tr>
<td>Send Email When Cluster is Ready</td>
<td>(Optional) Check this to receive an email each time the cluster status changes.</td>
</tr>
<tr>
<td>Public In Account</td>
<td>(Optional) If this option is checked, all the users belonging to your account will be able to use this cluster, but they cannot delete it.</td>
</tr>
</tbody>
</table>
<blockquote>
<p>By default, Ambari Username and Ambari Password are set to <code>admin</code>. You can override it in the "<a href="#configure-cluster">Configure Cluster</a>" tab.</p>
</blockquote>
</li>
<li>
<p>On the <strong>Set up Network and Security</strong> page, provide the following parameters:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Network</td>
<td>Select the virtual network in which you would like your cluster to be provisioned. You can define custom network configurations or use default network configurations.</td>
</tr>
<tr>
<td>Enable Knox Gateway</td>
<td>(Optional) Select this option to enable secure access to Ambari web UI and other cluster UIs via Knox gateway.</td>
</tr>
<tr>
<td>Enable Kerberos Security</td>
<td>(Optional) Select this option to enable Kerberos for your cluster. You will have an option to create a new kerberos or use an existing one. For more information refer to Kerberos <a href="http://sequenceiq.com/cloudbreak-docs/latest/kerberos/">documentation</a>.</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>On the <strong>Choose Blueprint</strong> page, select the blueprint that you would like to use for your cluster. You can either choose one of the pre-configured blueprints, or add your own in the <strong>manage blueprints</strong> tab.</p>
<p>For each host group you must provide the following:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Group Size</td>
<td>Enter a number defining how many nodes to create per host group. Default is 1. The "Group Size" for that host group on which Ambari Server is installed must be set to "1".</td>
</tr>
<tr>
<td>Template</td>
<td>If you have previously created a template for VMs and storage, you can select it here. If you don't make a selection, default will be used.</td>
</tr>
<tr>
<td>Security Group</td>
<td>If you have previously created a template for a security group, you can select it here. If you don't make a selection, default will be used.</td>
</tr>
<tr>
<td>Ambari Server</td>
<td>You must select one node for Ambari Server. The "Group Size" for that host group must be set to "1".</td>
</tr>
<tr>
<td>Recipes</td>
<td>You can select a previously added recipe (custom script) to be executed on all nodes of the host group. Refer to <a href="../recipes/index.html">Recipes</a>.</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>On the <strong>Add File System</strong> page, select to use one of the following filesystems:</p>
<ul>
<li><em>Local HDFS</em>: No external storage outside of HDFS will be used</li>
<li><em>Windows Azure Data Lake Storage</em>: If you select this option, you must provide <em>Data Lake Store account name</em>.  <blockquote>
<p>You must configure access control for Cloudbreak's service principal manually after cluster installation. You can obtain the service principal ID from the Cloudbreak UI. For more information, refer to <a href="https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-access-control">Azure documentation</a>.  </p>
</blockquote>
</li>
<li>
<p><em>Windows Azure Blob Storage</em>: If you select this option, you must provide:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Storage Account Name</td>
<td>Enter your account name.</td>
</tr>
<tr>
<td>Storage Account Access Key</td>
<td>Enter your access key.</td>
</tr>
<tr>
<td>Use File System As Default</td>
<td>Select this option if you want to make WASB your default file system, instead of HDFS.</td>
</tr>
</tbody>
</table>
</li>
</ul>
</li>
<li>
<p>Click on <strong>Review and Launch</strong> and then <strong>+create and start cluster</strong>.</p>
</li>
<li>
<p>You will be redirected to the Cloudbreak dashboard, and a new tile representing your cluster will appear at the top of the page.</p>
</li>
</ol>
<h3 id="advanced-options">Advanced Options</h3>
<p>Click on <strong>Show Advanced Options</strong> to enter additional configuration options.</p>
<h4 id="configure-cluster">Configure Cluster</h4>
<p>You can optionally configure the following advanced parameters:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ambari Username</td>
<td>You can log in to the Ambari UI using this username. By default, this is set to <code>admin</code>.</td>
</tr>
<tr>
<td>Ambari Password</td>
<td>You can log in to the Ambari UI using this password. By default, this is set to <code>admin</code>.</td>
</tr>
<tr>
<td>Provision Cluster</td>
<td><strong>SALT</strong> is pre-selected to provision your cluster.</td>
</tr>
<tr>
<td><strong>Enable availability sets</strong></td>
<td>Azure implements the concept of <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/infrastructure-availability-sets-guidelines#availability-sets">availability sets</a> to support fault tolerance for VM's. You can enable availability sets by using the checkbox, and then add the desired availability sets by providing a name and the desired fault domain count (2 or 3). Next, these defined availability sets can be assigned to specific host groups in the <a href="#choose-blueprint">Choose Blueprint</a> tab. For more information about availability sets, refer to <a href="#availability-sets">Availability Sets</a>.</td>
</tr>
<tr>
<td>Enable Lifetime Management</td>
<td>Check this option if you would like your cluster to be automatically terminated after a specific amount of time (defined as "Time to Live" in minuter) has passed.</td>
</tr>
<tr>
<td>Flex Subscription</td>
<td>This option will appear if you have configured your deployment for a <a href="../get-help/index.html#flex-subscription">Flex Subscription</a>.</td>
</tr>
</tbody>
</table>
<h4 id="choose-blueprint">Choose Blueprint</h4>
<p>After selecting a blueprint, you can optionally configure the following advanced parameters:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Config Recommendation Strategy (Stack Advisor)</td>
<td>Select how configuration recommendations generated by stack advisor will be applied. Select one of <p><ul><li>ALWAYS_APPLY: Configuration recommendations will be applied automatically.</li><li>ALWAYS_APPLY_DONT_OVERRIDE_CUSTOM_VALUES: Configuration recommendations will be applied automatically, but they will be ignored for custom configurations.</li><li>NEVER_APPLY: Configuration recommendations will be ignored.</li><li>ONLY_STACK_DEFAULTS_APPLY: Configuration recommendations will be applied only on the default configurations for all included services.</li></ul></p></td>
</tr>
<tr>
<td>Validate Blueprint</td>
<td>Select to validate the blueprint.</td>
</tr>
</tbody>
</table>
<h4 id="add-file-system">Add File System</h4>
<p>After selecting the filesystem, you can optionally configure the following advanced parameters:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Attached Storage Type</td>
<td>Select <strong>single storage for all VMs</strong> or <strong>separate storage for every VM</strong>. Selecting single storage means that your whole cluster's OS disks will be placed in one storage account. Using separate storage for every VM will deploy as many storage accounts as the number of nodes in your cluster, avoiding the IOPS limit of a particular storage account.</td>
</tr>
<tr>
<td>Persistent Storage Name</td>
<td>Enter a name for the persistent storage directory. Default is <strong>cbstore</strong>.</td>
</tr>
</tbody>
</table>
<h4 id="choose-failure-action">Choose Failure Action</h4>
<p>You can optionally select what to do if cluster creation fails or if there aren't enough instances available to create all requested nodes:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Failure Action</td>
<td><p>Select one of: <strong>do NOT rollback resources</strong> (default) or <strong>rollback resources</strong>. </p><p>By default, if creating a cluster fails, the Azure resources that were created up to that point will not be rolled back. This means that they will remain accessible for troubleshooting and you will need to to delete them manually.</p></td>
</tr>
<tr>
<td>Minimum Cluster Size</td>
<td>This defines the provisioning strategy in case the cloud provider cannot allocate all the requested nodes. Select <strong>best effort</strong> or <strong>exact</strong>.</td>
</tr>
</tbody>
</table>
<h4 id="configure-ambari-repos">Configure Ambari Repos</h4>
<p>You can optionally configure a different version of Ambari than the default by providing the following information:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ambari Version</td>
<td>Enter Ambari version.</td>
</tr>
<tr>
<td>Ambari Repo URL</td>
<td>Enter Ambari repo URL.</td>
</tr>
<tr>
<td>Ambari Repo Gpg Key URL</td>
<td>Enter gpgkey URL.</td>
</tr>
</tbody>
</table>
<h4 id="configure-hdp-repos">Configure HDP Repos</h4>
<p>You can optionally configure a different version of HDP than the default by providing the following information:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Stack</td>
<td>Enter stack name.</td>
</tr>
<tr>
<td>Version</td>
<td>Enter stack version.</td>
</tr>
<tr>
<td>Stack Repo ID</td>
<td>Enter stack repo ID.</td>
</tr>
<tr>
<td>Base URL</td>
<td>Ener stack repo base URL.</td>
</tr>
<tr>
<td>Utils Repo ID</td>
<td>Enter Utils repo ID.</td>
</tr>
<tr>
<td>Utils Base URL</td>
<td>Enter Utils repo base URL.</td>
</tr>
<tr>
<td>Verify</td>
<td>Select to verify the repo information.</td>
</tr>
</tbody>
</table>
<h4 id="configure-ambari-database">Configure Ambari Database</h4>
<p>By default, Ambari stores data on an embedded database, which is sufficient for ephemeral or test clusters. However, as Ambari and Cloudbreak don't perform backups of this database, it is insufficient for long-running production clusters, and you may need to configure a remote database for Ambari and Cloudbreak.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Vendor</td>
<td>Select database vendor from the list.</td>
</tr>
<tr>
<td>Host</td>
<td>Enter database host IP.</td>
</tr>
<tr>
<td>Port</td>
<td>Enter port number.</td>
</tr>
<tr>
<td>Name</td>
<td>Enter database name.</td>
</tr>
<tr>
<td>User Name</td>
<td>Enter database user name.</td>
</tr>
<tr>
<td>Password</td>
<td>Enter database password.</td>
</tr>
</tbody>
</table>
<h4 id="availability-sets">Availability Sets</h4>
<p>To support fault tolerance for VMs, Azure introduced the concept of <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/linux/manage-availability">availability sets</a>. This allows two or more VMs to be mapped to multiple fault domains, each of which defines a group of virtual machines that share a common power source and a network switch. When adding VMs to an availability set, Azure automatically assigns each VM a fault domain. This SLA includes guarantees that during OS Patching in Azure or during maintenance operations, at least one VM belonging to a given fault domain will be available.</p>
<p>In Cloudbreak UI, availability sets can be configured during cluster creation:</p>
<ol>
<li>
<p>Enable availability sets using the checkbox on the <strong>Configure Cluster</strong> page. </p>
</li>
<li>
<p>Add the desired availability sets by providing a name and the desired fault domain count (2 or 3).</p>
</li>
<li>
<p>The sets defined here can be assigned to the host groups on the <strong>Choose Blueprint</strong> page. One availability set can be assigned to only one host group, so you should define in advance as many availability sets as needed for your host groups. The assignment of fault domains is automated by Azure, so there is no option for this in Cloudbreak UI.</p>
<blockquote>
<p><strong>IMPORTANT</strong>: The availability sets should only be used when there is a group of two or more application-tier VMs. Single instances placed in an availability set are not subject to Azure’s SLA, and you will not receive warnings of planned maintenance events. </p>
</blockquote>
</li>
<li>
<p>After the deployment is finished, you can check the layout of the VMs inside an availability set on Azure Portal. You will find the "Availability set" resources corresponding to the host groups inside the deployment's resource group. </p>
</li>
</ol>
<div class="next">
<a href="../azure-data/index.html">Next: Access Cloud Data</a>
</div></div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        <p>
        <small>© 2011-2017 <a href="http://www.hortonworks.com" target="_blank">Hortonworks Inc</a>. All Rights Reserved. | <a href="http://hortonworks.com/privacy-policy/" target="_blank">Privacy Policy</a><br></small>
        
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
    </footer>

    <script src="../js/jquery-1.10.2.min.js"></script>
    <script src="../js/bootstrap-3.0.3.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '..';
    </script>
    <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
    <script src="../js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
