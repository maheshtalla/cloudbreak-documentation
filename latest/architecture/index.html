<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <link rel="canonical" href="http://hortonworks.github.io/cloudbreak-documentation/architecture/index.html"> 
    <link rel="shortcut icon" href="../images/favicon.png">

    <title>Architecture - Cloudbreak</title>

    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../css/base.css" rel="stylesheet">
    <link href="../css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.css">


    <link href="../css/extra.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
    <script>
    (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-22950817-24', 'auto');
    ga('send', 'pageview');
    </script>
    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../index.html">Cloudbreak</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Get Started <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../index.html">Introduction</a>
</li>

                        
                            
<li class="active">
    <a href="index.html">Architecture</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">AWS <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../aws-launch/index.html">Launch on AWS</a>
</li>

                        
                            
<li >
    <a href="../aws-config/index.html">Define Infrastructure Templates</a>
</li>

                        
                            
<li >
    <a href="../aws-blueprints/index.html">Define Cluster Blueprints</a>
</li>

                        
                            
<li >
    <a href="../aws-create/index.html">Create a Cluster</a>
</li>

                        
                            
<li >
    <a href="../aws-cb-ui/index.html">Manage and Monitor Clusters</a>
</li>

                        
                            
<li >
    <a href="../aws-data/index.html">Access Data on S3</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Azure <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../azure-launch/index.html">Launch on Azure</a>
</li>

                        
                            
<li >
    <a href="../azure-config/index.html">Define Infrastructure Templates</a>
</li>

                        
                            
<li >
    <a href="../azure-blueprints/index.html">Define Cluster Blueprints</a>
</li>

                        
                            
<li >
    <a href="../azure-create/index.html">Create a Cluster</a>
</li>

                        
                            
<li >
    <a href="../azure-cb-ui/index.html">Manage and Monitor Clusters</a>
</li>

                        
                            
<li >
    <a href="../azure-data/index.html">Access Data on Azure</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">GCP <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../gcp-launch/index.html">Launch on GCP</a>
</li>

                        
                            
<li >
    <a href="../gcp-config/index.html">Define Infrastructure Templates</a>
</li>

                        
                            
<li >
    <a href="../gcp-blueprints/index.html">Define Cluster Blueprints</a>
</li>

                        
                            
<li >
    <a href="../gcp-create/index.html">Create a Cluster</a>
</li>

                        
                            
<li >
    <a href="../gcp-cb-ui/index.html">Manage and Monitor Clusters</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">OpenStack <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../os-launch/index.html">Launch on Open Stack</a>
</li>

                        
                            
<li >
    <a href="../os-config/index.html">Define Infrastructure Templates</a>
</li>

                        
                            
<li >
    <a href="../os-blueprints/index.html">Define Cluster Blueprints</a>
</li>

                        
                            
<li >
    <a href="../os-create/index.html">Create a Cluster</a>
</li>

                        
                            
<li >
    <a href="../os-cb-ui/index.html">Manage and Monitor Clusters</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Config & Admin <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../credentials/index.html">Cloudbreak Credentials</a>
</li>

                        
                            
<li >
    <a href="../tags/index.html">Resource Tagging</a>
</li>

                        
                            
<li >
    <a href="../recipes/index.html">Recipes (Custom Scripts)</a>
</li>

                        
                            
<li >
    <a href="../autoscaling/index.html">Auto Scaling</a>
</li>

                        
                            
<li >
    <a href="../platforms/index.html">Platforms (TP)</a>
</li>

                        
                            
<li >
    <a href="../ambari-db/index.html">Ambari Database (TP)</a>
</li>

                        
                            
<li >
    <a href="../cb-db/index.html">Cloudbreak Database</a>
</li>

                        
                            
<li >
    <a href="../images/index.html">Custom Cloud Images (TP)</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Manage Cloudbreak</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../cb-account/index.html">Manage Your Account</a>
</li>

        
            
<li >
    <a href="../upgrade/index.html">Upgrade Clodbreak</a>
</li>

        
            
<li >
    <a href="../delete/index.html">Delete Cloudbreak</a>
</li>

        
            
<li >
    <a href="../vm-launch/index.html">Install on Your Own VM</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Security <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../security/index.html">Network and Security</a>
</li>

                        
                            
<li >
    <a href="../security-profile/index.html">Securing Profile</a>
</li>

                        
                            
<li >
    <a href="../ssl-certificate/index.html">SSL Certificate</a>
</li>

                        
                            
<li >
    <a href="../ldap/index.html">LDAP/AD</a>
</li>

                        
                            
<li >
    <a href="../kerberos/index.html">Kerberos</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../releasenotes/index.html">Release Notes</a>
</li>

                        
                            
<li >
    <a href="../cb-shell/index.html">Cloudbreak Shell</a>
</li>

                        
                            
<li >
    <a href="../profile/index.html">Profile File</a>
</li>

                        
                            
<li >
    <a href="../faq/index.html">FAQ</a>
</li>

                        
                            
<li >
    <a href="../trouble/index.html">Troubleshooting</a>
</li>

                        
                            
<li >
    <a href="../get-help/index.html">Getting Help</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Developer Docs</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../api/index.html">API</a>
</li>

        
            
<li >
    <a href="../spi/index.html">SPI</a>
</li>

        
            
<li >
    <a href="../flows/index.html">Flows</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                
                    <li >
                        <a rel="next" href="../index.html">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../aws-launch/index.html">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/hortonworks/cloudbreak-documentation">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="first-level active"><a href="#architecture">Architecture</a></li>
        
            <li class="second-level"><a href="#cloudbreak-deployer-architecture">Cloudbreak Deployer Architecture</a></li>
            
        
            <li class="second-level"><a href="#system-level-containers">System Level Containers</a></li>
            
        
            <li class="second-level"><a href="#cloudbreak-application-architecture">Cloudbreak Application Architecture</a></li>
            
        
            <li class="second-level"><a href="#saltstack">SaltStack</a></li>
            
        
            <li class="second-level"><a href="#cloud-resources-used">Cloud Resources Used</a></li>
            
        
    
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h2 id="architecture">Architecture</h2>
<p><strong>Cloudbreak deployer</strong> installs Cloudbreak components on your AWS VM. Once these components are deployed, you can use <strong>Cloudbreak application</strong> to create, manage, and monitor clusters. </p>
<h3 id="cloudbreak-deployer-architecture">Cloudbreak Deployer Architecture</h3>
<p>Cloudbreak deployer includes the following components:</p>
<table>
<thead>
<tr>
<th>Component</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Cloudbreak Application</strong></td>
<td>Cloudbreak application is built on the foundation of cloud provider APIs and Apache Ambari.</td>
</tr>
<tr>
<td><strong>Uluwatu</strong></td>
<td>This is Cloudbreak web UI, which can be used to create, manage, and monitor clusters.</td>
</tr>
<tr>
<td><strong>Cloudbreak Shell</strong></td>
<td>This is Cloudbreak's command line tool, which can be used to create, manage, and monitor clusters.</td>
</tr>
<tr>
<td><strong>UAA</strong></td>
<td>This is Cloudbreak's OAuth identity server implementation, which utilizes UAA.</td>
</tr>
<tr>
<td><strong>Sultans</strong></td>
<td>This is Cloudbreak's user management system.</td>
</tr>
<tr>
<td><strong>Periscope</strong></td>
<td>This is Cloudbreak's autoscaling application, which is responsible for automatically increasing or decreasing the capacity of the cluster when your pre-defined conditions are met.</td>
</tr>
</tbody>
</table>
<blockquote>
<p>These component names are used in Cloudbreak logs, so for troubleshooting purposes it is useful to know what they refer to.</p>
</blockquote>
<h3 id="system-level-containers">System Level Containers</h3>
<p>Cloudbreak deployer utilizes <strong>containerization</strong> - also known as container-based virtualization or application containerization - which is an OS-level virtualization method for deploying and running distributed applications. </p>
<p>Cloudbreak deployer includes the following system-level containers:</p>
<ul>
<li>Consul: Cloudbreak service registry  </li>
<li>Registrator: Automatically registers/unregisters containers with consul </li>
<li>Database: Database container for cloudbreak, autoscaling, and UAA  </li>
<li>Traefik: Proxy container </li>
</ul>
<h3 id="cloudbreak-application-architecture">Cloudbreak Application Architecture</h3>
<p>The Cloudbreak application is a web application that communicates with the cloud provider account to create cloud resources on your behalf. Once the cloud resources are in place, Cloudbreak uses Apache Ambari to deploy and configure the cluster on cloud VMs. Once your cluster is deployed, you can use Cloudbreak to scale the cluster.</p>
<p>Cloudbreak application is built on the foundation of cloud provider APIs and Apache Ambari:</p>
<ul>
<li>
<p>Cloudbreak uses <strong>Apache Ambari</strong> to provision, manage, and monitor HDP clusters. </p>
<p>Ambari <strong>blueprints</strong> are used as a declarative definition of a cluster. With a blueprint, you can specify stack, component layout, and configurations to materialize an HDP cluster instance via Ambari REST API, without having to use the Ambari cluster install wizard. </p>
</li>
<li>
<p>Cloudbreak uses <strong>cloud provider APIs</strong> to create cloud resources required for the HDP clusters. </p>
<p>You can define these resources via <strong>templates</strong> for networks, security groups, and VMs and storage in the Cloudbreak web UI. Resources are only provisioned once you create a cluster using the templates.  </p>
</li>
</ul>
<p>The use of blueprints and templates is illustrated in the following image:</p>
<p><a href="../images/templates-and-blueprints2.png" target="_blank" title="click to enlarge"><img src="../images/templates-and-blueprints2.png" width="550" title="How Cloudbreak uses templates and blueprints"></a> </p>
<h3 id="saltstack">SaltStack</h3>
<p>Under the hood, Cloudbreak uses SaltStack to manage nodes of the cluster, install packages, change configuration files, and execute recipes. 
By default Salt master is installed on the same node where Ambari server is installed.  </p>
<h3 id="cloud-resources-used">Cloud Resources Used</h3>
<p>Cloubbreak and clusters deployed by it run in your cloud infrastructure. In general, Cloudbreak uses the following types of cloud resources provisioned on your cloud account:</p>
<table>
<thead>
<tr>
<th>Category</th>
<th>Description</th>
<th>AWS</th>
<th>Azure</th>
<th>GCP</th>
<th>OpenStack</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>VMs and Storage</em></td>
<td>Cloudbreak and cluster nodes created by it run on <strong>VMs</strong>.</td>
<td><a href="https://aws.amazon.com/documentation/ec2/">Amazon EC2</a></td>
<td><a href="https://docs.microsoft.com/en-us/azure/virtual-machines/virtual-machines-linux-azure-overview?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json">Virtual machines</a></td>
<td><a href="https://cloud.google.com/compute/docs/">Compute Engine</a></td>
<td>????</td>
</tr>
<tr>
<td><em>Network and Security</em></td>
<td>VMs run within a <strong>virtual network</strong> and <strong>subnets</strong>. An <strong>Internet gateway</strong> is used to enable outbound access to the Internet from the Cloudbreak instance and the cluster instances, and a route table is used to connect the subnet to the Internet gateway. <strong>Security groups</strong> control the inbound and outbound traffic to and from the VMs.</td>
<td><a href="https://aws.amazon.com/documentation/vpc/">Amazon VPC</a></td>
<td><a href="https://docs.microsoft.com/en-us/azure/virtual-network/virtual-networks-overview">Virtual network</a></td>
<td><a href="https://cloud.google.com/compute/docs/vpc/">Virtual Private Cloud</a></td>
<td>????</td>
</tr>
<tr>
<td><em>Access Control</em></td>
<td></td>
<td>AWS IAM</td>
<td>Active Directory</td>
<td>IAM</td>
<td>????</td>
</tr>
<tr>
<td><em>Resource Management</em></td>
<td>Cloudbreak uses a designated cloud service to create and manage a collection of related AWS resources.</td>
<td>AWS CloudFormation</td>
<td>Resource Groups</td>
<td>????</td>
<td>????</td>
</tr>
<tr>
<td><em>Cloud Storage</em></td>
<td></td>
<td>Amazon S3</td>
<td>ADLS and <a href="https://docs.microsoft.com/en-us/azure/storage/storage-introduction">WASB</a></td>
<td>Google Cloud Storage</td>
<td>????</td>
</tr>
</tbody>
</table>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>TO-DO: Need to get this reviewed. Is there anything else that I should mention here? </p>
</blockquote>
</blockquote>
</blockquote>
</blockquote></div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        <p>
        <small>© 2011-2017 <a href="http://www.hortonworks.com" target="_blank">Hortonworks Inc</a>. All Rights Reserved. | <a href="http://hortonworks.com/privacy-policy/" target="_blank">Privacy Policy</a><br></small>
        
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
    </footer>

    <script src="../js/jquery-1.10.2.min.js"></script>
    <script src="../js/bootstrap-3.0.3.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '..';
    </script>
    <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
    <script src="../js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
