<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <link rel="canonical" href="http://hortonworks.github.io/cloudbreak-documentation/security-cb/index.html"> 
    <link rel="shortcut icon" href="../images/favicon.png">

    <title>Secure Cloudbreak after Launch - Cloudbreak</title>

    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../css/base.css" rel="stylesheet">
    <link href="../css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.css">


    <link href="../css/extra.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
    <script>
    (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-22950817-24', 'auto');
    ga('send', 'pageview');
    </script>
    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../index.html">Cloudbreak</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Get Started <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../index.html">Introduction</a>
</li>

                        
                            
<li >
    <a href="../architecture/index.html">Architecture</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">AWS <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../aws-launch/index.html">Launch on AWS</a>
</li>

                        
                            
<li >
    <a href="../aws-create/index.html">Create a Cluster</a>
</li>

                        
                            
<li >
    <a href="../aws-data/index.html">Access Data on S3</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Azure <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../azure-launch/index.html">Launch on Azure</a>
</li>

                        
                            
<li >
    <a href="../azure-create/index.html">Create a Cluster</a>
</li>

                        
                            
<li >
    <a href="../azure-data/index.html">Access Data on Azure</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">GCP <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../gcp-launch/index.html">Launch on GCP</a>
</li>

                        
                            
<li >
    <a href="../gcp-create/index.html">Create a Cluster</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">OpenStack <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../os-launch/index.html">Launch on Open Stack</a>
</li>

                        
                            
<li >
    <a href="../os-create/index.html">Create a Cluster</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Config & Admin <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../clusters-access/index.html">Access Cluster</a>
</li>

                        
                            
<li >
    <a href="../clusters-manage/index.html">Manage and Monitor Cluster</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Configure Cluster</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../blueprints/index.html">Blueprints</a>
</li>

        
            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Templates</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../templates-aws/index.html">Templates for AWS</a>
</li>

        
            
<li >
    <a href="../templates-azure/index.html">Templates for Azure</a>
</li>

        
            
<li >
    <a href="../templates-gcp/index.html">Templates for GCP</a>
</li>

        
            
<li >
    <a href="../templates-os/index.html">Templates for OpenStack</a>
</li>

        
    </ul>
  </li>

        
            
<li >
    <a href="../recipes/index.html">Recipes</a>
</li>

        
            
<li >
    <a href="../tags/index.html">Resource Tagging</a>
</li>

        
            
<li >
    <a href="../autoscaling/index.html">Auto Scaling</a>
</li>

        
            
<li >
    <a href="../images/index.html">Custom Cloud Images (TP)</a>
</li>

        
            
<li >
    <a href="../ambari-db/index.html">Ambari Database (TP)</a>
</li>

        
            
<li >
    <a href="../cb-db/index.html">Cloudbreak Database</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Configure Security</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../security/index.html">Network and Security</a>
</li>

        
            
<li class="active">
    <a href="index.html">Secure Cloudbreak after Launch</a>
</li>

        
            
<li >
    <a href="../security-ldap/index.html">Enable LDAP/AD for Cloudbreak</a>
</li>

        
            
<li >
    <a href="../security-kerberos/index.html">Enable Kerberos for Your Cluster</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Manage Cloudbreak</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../credentials/index.html">Manage Cloudbreak Credentials</a>
</li>

        
            
<li >
    <a href="../cb-account/index.html">Manage Your Account</a>
</li>

        
            
<li >
    <a href="../upgrade/index.html">Upgrade Clodbreak</a>
</li>

        
            
<li >
    <a href="../delete/index.html">Delete Cloudbreak</a>
</li>

        
            
<li >
    <a href="../vm-launch/index.html">Install on Your Own VM</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../releasenotes/index.html">Release Notes</a>
</li>

                        
                            
<li >
    <a href="../cb-shell/index.html">Cloudbreak Shell</a>
</li>

                        
                            
<li >
    <a href="../profile/index.html">Profile File</a>
</li>

                        
                            
<li >
    <a href="../faq/index.html">FAQs</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Troubleshooting</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../trouble-cb/index.html">General Troubleshooting</a>
</li>

        
            
<li >
    <a href="../trouble-aws/index.html">Troubleshooting AWS</a>
</li>

        
            
<li >
    <a href="../trouble-azure/index.html">Troubleshooting Azure</a>
</li>

        
            
<li >
    <a href="../trouble-gcp/index.html">Troubleshooting GCP</a>
</li>

        
            
<li >
    <a href="../trouble-os/index.html">Troubleshooting OpenStack</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../get-help/index.html">Getting Help</a>
</li>

                        
                            
<li >
    <a href="../smartsense/index.html">SmartSense</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Developer Docs</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../dev-local-dev/index.html">Local Development</a>
</li>

        
            
<li >
    <a href="../dev-api/index.html">API</a>
</li>

        
            
<li >
    <a href="../dev-spi/index.html">SPI</a>
</li>

        
            
<li >
    <a href="../dev-flows/index.html">Flows</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                
                    <li >
                        <a rel="next" href="../security/index.html">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../security-ldap/index.html">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/hortonworks/cloudbreak-documentation">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="first-level active"><a href="#securing-cloudbreak-after-launch">Securing Cloudbreak After Launch</a></li>
        
            <li class="second-level"><a href="#restricting-inbound-access">Restricting Inbound Access</a></li>
            
        
            <li class="second-level"><a href="#configuring-the-profile">Configuring the Profile</a></li>
            
        
            <li class="second-level"><a href="#adding-ssl-certificate-for-cloudbreak">Adding SSL Certificate for Cloudbreak</a></li>
            
        
    
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h2 id="securing-cloudbreak-after-launch">Securing Cloudbreak After Launch</h2>
<p>Cloudbreak comes with default settings designed for easy first experience rather than strict security. To secure Cloudbreak, follow these recommendations. </p>
<h3 id="restricting-inbound-access">Restricting Inbound Access</h3>
<p>We recommend that you block all communication ports except 443 on the firewall or security group (depending on the provider). </p>
<p>If you have to log in to the Cloudbreak host remotely, use the SSH port (usually 22).</p>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>TO-DO: Is the step above up-to-date? I think ports 80 and 22 is also open. </p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<h3 id="configuring-the-profile">Configuring the Profile</h3>
<p>Before starting Cloudbreak for the first time, configure the Profile file as directed below. Changes are applied during startup so a restart (<code>cbd restart</code>) is required after each change.</p>
<ol>
<li>
<p>Execute the following command in the directory where you want to store Cloudbreak-related files:</p>
<p><pre>
echo export PUBLIC_IP=[the ip or hostname to bind] &gt; Profile
</pre></p>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>TO-DO: Do you mean that this needs to be executed in the deployment directory? Or?</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</li>
<li>
<p>After you have a base Profile file, add the following custom properties to it:</p>
<p><pre>
export UAA_DEFAULT_SECRET='[custom secret]'
export UAA_DEFAULT_USER_EMAIL='[default admin email address]'
export UAA_DEFAULT_USER_PW='[default admin password]'
export UAA_DEFAULT_USER_FIRSTNAME='[default admin first name]'
export UAA_DEFAULT_USER_LASTNAME='[default admin last name]'
</pre></p>
<p>Cloudbreak has additional secrets which by default inherit their values from <code>UAA_DEFAULT_SECRET</code>. Instead of using the default, you can define different values in the Profile for each of these service clients:</p>
<p><pre>
export UAA_CLOUDBREAK_SECRET='[cloudbreak secret]'
export UAA_PERISCOPE_SECRET='[auto scaling secret]'
export UAA_ULUWATU_SECRET='[web ui secret]'
export UAA_SULTANS_SECRET='[authenticator secret]'
</pre></p>
<p>You can change these secrets at any time, except <code>UAA_CLOUDBREAK_SECRET</code> which is used to encrypt sensitive information at database level. </p>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>TO-DO: The info below is explained in a way that is confusing. Can you rephrase? </p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
<p><code>UAA_DEFAULT_USER_PW</code> is stored in plain text format, but if <code>UAA_DEFAULT_USER_PW</code> is missing from the Profile, it gets a default value. Because default password is not an option, if you set an empty password explicitly in the Profile Cloudbreak deployer will ask for password all the time when it is needed for the operation.</p>
<p><pre>
export UAA_DEFAULT_USER_PW=''
</pre></p>
<p>In this case, Cloudbreak deployer wouldn't be able to add the default user, so you have to do it manually by executing the following command:</p>
<p><pre>
cbd util add-default-user
</pre></p>
</li>
</ol>
<h3 id="adding-ssl-certificate-for-cloudbreak">Adding SSL Certificate for Cloudbreak</h3></div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        <p>
        <small>© 2011-2017 <a href="http://www.hortonworks.com" target="_blank">Hortonworks Inc</a>. All Rights Reserved. | <a href="http://hortonworks.com/privacy-policy/" target="_blank">Privacy Policy</a><br></small>
        
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
    </footer>

    <script src="../js/jquery-1.10.2.min.js"></script>
    <script src="../js/bootstrap-3.0.3.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '..';
    </script>
    <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
    <script src="../js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
