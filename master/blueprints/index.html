<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <link rel="canonical" href="http://hortonworks.github.io/cloudbreak-documentation/blueprints/index.html"> 
    <link rel="shortcut icon" href="../images/favicon.png">

    <title>Blueprints - Cloudbreak</title>

    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../css/base.css" rel="stylesheet">
    <link href="../css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.css">


    <link href="../css/extra.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
    <script>
    (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-22950817-24', 'auto');
    ga('send', 'pageview');
    </script>
    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../index.html">Cloudbreak</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Get Started <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../index.html">Introduction</a>
</li>

                        
                            
<li >
    <a href="../architecture/index.html">Architecture</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">AWS <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../aws-launch/index.html">Launch on AWS</a>
</li>

                        
                            
<li >
    <a href="../aws-create/index.html">Create a Cluster</a>
</li>

                        
                            
<li >
    <a href="../aws-clusters-access/index.html">Access Cluster</a>
</li>

                        
                            
<li >
    <a href="../aws-clusters-manage/index.html">Manage and Monitor Clusters</a>
</li>

                        
                            
<li >
    <a href="../aws-data/index.html">Access Data on S3</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Azure <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../azure-launch/index.html">Launch on Azure</a>
</li>

                        
                            
<li >
    <a href="../azure-create/index.html">Create a Cluster</a>
</li>

                        
                            
<li >
    <a href="../azure-clusters-access/index.html">Access Cluster</a>
</li>

                        
                            
<li >
    <a href="../azure-clusters-manage/index.html">Manage and Monitor Clusters</a>
</li>

                        
                            
<li >
    <a href="../azure-data/index.html">Access Data on Azure</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">GCP <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../gcp-launch/index.html">Launch on GCP</a>
</li>

                        
                            
<li >
    <a href="../gcp-create/index.html">Create a Cluster</a>
</li>

                        
                            
<li >
    <a href="../gcp-clusters-access/index.html">Access Cluster</a>
</li>

                        
                            
<li >
    <a href="../gcp-clusters-manage/index.html">Manage and Monitor Clusters</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">OpenStack <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../os-launch/index.html">Launch on Open Stack</a>
</li>

                        
                            
<li >
    <a href="../os-create/index.html">Create a Cluster</a>
</li>

                        
                            
<li >
    <a href="../os-clusters-access/index.html">Access Cluster</a>
</li>

                        
                            
<li >
    <a href="../os-clusters-manage/index.html">Manage and Monitor Clusters</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Using Cloudbreak <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Advanced Cluster Options</a>
    <ul class="dropdown-menu">
        
            
<li class="active">
    <a href="index.html">Blueprints</a>
</li>

        
            
<li >
    <a href="../recipes/index.html">Recipes</a>
</li>

        
            
<li >
    <a href="../tags/index.html">Resource Tagging</a>
</li>

        
            
<li >
    <a href="../images/index.html">Custom Images</a>
</li>

        
            
<li >
    <a href="../autoscaling/index.html">Autoscaling</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Managing Cloudbreak</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../vm-launch/index.html">Install on Your Own VM</a>
</li>

        
            
<li >
    <a href="../cb-upgrade/index.html">Upgrade Cloudbreak</a>
</li>

        
            
<li >
    <a href="../cb-credentials/index.html">Manage Cloudbreak Credentials</a>
</li>

        
            
<li >
    <a href="../cb-disable-provider/index.html">Disable Providers</a>
</li>

        
            
<li >
    <a href="../cb-db/index.html">Configure External Cloudbreak Database</a>
</li>

        
            
<li >
    <a href="../cb-migrate/index.html">Move Cloudbreak Instance</a>
</li>

        
            
<li >
    <a href="../cb-profile/index.html">Edit Cloudbreak Profile</a>
</li>

        
            
<li >
    <a href="../cb-delete/index.html">Delete Cloudbreak</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Security</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../security/index.html">Security Overview</a>
</li>

        
            
<li >
    <a href="../security-cb/index.html">Configure Basic Security</a>
</li>

        
            
<li >
    <a href="../security-kerberos/index.html">Enable Kerberos Security</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">CLI</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../cli-install/index.html">Install the CLI</a>
</li>

        
            
<li >
    <a href="../cli-get-started/index.html">Get Started with the CLI</a>
</li>

        
            
<li >
    <a href="../cli-reference/index.html">CLI Reference</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Troubleshooting</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../trouble-cb-logs/index.html">Cloudbreak Logs</a>
</li>

        
            
<li >
    <a href="../trouble-cb/index.html">Troubleshooting Cloudbreak</a>
</li>

        
            
<li >
    <a href="../trouble-cluster/index.html">Troubleshooting Cluster Creation</a>
</li>

        
            
<li >
    <a href="../trouble-aws/index.html">Troubleshooting AWS</a>
</li>

        
            
<li >
    <a href="../trouble-azure/index.html">Troubleshooting Azure</a>
</li>

        
            
<li >
    <a href="../trouble-gcp/index.html">Troubleshooting GCP</a>
</li>

        
            
<li >
    <a href="../trouble-os/index.html">Troubleshooting OpenStack</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../dev/index.html">Developer Documentation</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">More <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../releasenotes/index.html">Release Notes</a>
</li>

                        
                            
<li >
    <a href="../faq/index.html">FAQs</a>
</li>

                        
                            
<li >
    <a href="../get-help/index.html">Getting Help</a>
</li>

                        
                            
<li >
    <a href="../smartsense/index.html">SmartSense</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Legal</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../acknowledge/index.html">Acknowledgements</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                
                    <li >
                        <a rel="next" href="../os-clusters-manage/index.html">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../recipes/index.html">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/hortonworks/cloudbreak-documentation">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="first-level active"><a href="#blueprints">Blueprints</a></li>
        
            <li class="second-level"><a href="#using-default-blueprints">Using Default Blueprints</a></li>
            
                <li class="third-level"><a href="#default-blueprints">Default Blueprints</a></li>
            
        
            <li class="second-level"><a href="#using-custom-blueprints">Using Custom Blueprints</a></li>
            
                <li class="third-level"><a href="#creating-a-blueprint">Creating a Blueprint</a></li>
            
                <li class="third-level"><a href="#upload-a-blueprint">Upload a Blueprint</a></li>
            
        
            <li class="second-level"><a href="#view-blueprint-details">View Blueprint Details</a></li>
            
        
            <li class="second-level"><a href="#delete-blueprint">Delete Blueprint</a></li>
            
        
    
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h2 id="blueprints">Blueprints</h2>
<p><strong>Ambari blueprints</strong> are your declarative definition of your HDP cluster, defining the host groups and which components to install on which host group. Ambari uses them as a base for your clusters. </p>
<p>You have two options concerning using blueprints with Cloudbreak:</p>
<ul>
<li>Use one of the pre-defined blueprints.    </li>
<li>Add your custom blueprint by uploading a JSON file or pasting the JSON text. </li>
</ul>
<p>We recommend that you review the default blueprints to check if they meet your requirements. You can do this by selecting <strong>Blueprints</strong> from the navigation pane in the Cloudbreak web UI or by reading the documentation below.</p>
<h3 id="using-default-blueprints">Using Default Blueprints</h3>
<p>To use one of the default blueprints, simply select them when creating a cluster. The option is available on the <strong>General Configuration</strong> page. First select the <strong>Stack Version</strong> and then select your chosen blueprint under <strong>Cluster Type</strong>. </p>
<h4 id="default-blueprints">Default Blueprints</h4>
<p>Cloudbreak includes the following default HDP cluster blueprints:</p>
<p>Platform Version: <strong>HDP 2.6</strong></p>
<table>
<thead>
<tr>
<th>Cluster Type</th>
<th>Main Services</th>
<th>Description</th>
<th>List of All Services Included</th>
</tr>
</thead>
<tbody>
<tr>
<td>Data Science</td>
<td><i class="fa fa-check" style="color: green"></i> Spark 2,<br>Zeppelin</td>
<td>Useful for data science with Spark 2 and Zeppelin.</td>
<td>HDFS, YARN, MapReduce2, Tez, Hive, Pig, Sqoop, ZooKeeper, Ambari Metrics, Spark 2, Zeppelin</td>
</tr>
<tr>
<td>EDW - Analytics</td>
<td><span><i class="fa fa-check" style="color: green"></i> Hive 2 LLAP</span>,<br>Zeppelin</td>
<td>Useful for EDW analytics using Hive LLAP.</td>
<td>HDFS, YARN, MapReduce2, Tez, Hive 2 LLAP, Druid, Pig, ZooKeeper, Ambari Metrics, Spark 2</td>
</tr>
<tr>
<td>EDW - ETL</td>
<td><i class="fa fa-check" style="color: green"></i> Hive,<br> Spark 2</td>
<td>Useful for ETL data processing with Hive and Spark 2.</td>
<td>HDFS, YARN, MapReduce2, Tez, Hive, Pig, ZooKeeper, Ambari Metrics, Spark 2</td>
</tr>
</tbody>
</table>
<p>The following configuration classification applies:
<ul>
<li><i class="fa fa-check" style="color: green"></i> Stable configurations are the best choice if you want to avoid issues and other problems with launching and using clusters.</li>
<li><i class="fa fa-warning" style="color: orange"></i> If you want to use a Technical Preview version of a component in a release of HDP, use these configurations.</li>
<li><i class="fa fa-warning" style="color: red"></i> These are the most cutting edge of the configurations, including Technical Preview components in a Technical Preview HDP release.</li>
</ul></p>
<h3 id="using-custom-blueprints">Using Custom Blueprints</h3>
<p>This option allows you to create and save your custom blueprints. </p>
<div class="note">
    <p class="first admonition-title">Creating Blueprints for Ambari 2.6.1+</p>
    <p class="last">
Ambari 2.6.1 or newer does not install the mysqlconnector; therefore, when creating a blueprint for Ambari 2.6.1 or newer <b>do not include the MYSQL_SERVER component</b> for Hive Metastore in your blueprint. Instead, you have two options:
<ul>
<li>Configure an external RDBMS instance for Hive Metastore and include the JDBC connection information in your blueprint. If you choose to use an external database that is not PostgreSQL (such as Oracle, mysql) you must also set up Ambari with the appropriate connector; to do that, create a pre-ambari-start recipe and pass it when creating a cluster.</li>
<li>If a remote Hive RDBMS is not provided, Cloudbrak will install a Postgres instance and configure it for Hive Metastore during the cluster launch.</li>
</ul>
For information on how to configure and pass your external database connection parameters, refer to [Ambari blueprint](https://cwiki.apache.org/confluence/display/AMBARI/Blueprints) documentation.
</p>
</div>

<h4 id="creating-a-blueprint">Creating a Blueprint</h4>
<p>Ambari blueprints are specified in the JSON format. </p>
<p>A blueprint can be exported from a running Ambari cluster and can be reused in Cloudbreak after slight modifications. When a blueprint is exported, it includes  some hardcoded configurations such as domain names, memory configurations, and so on, that are not applicable to the Cloudbreak cluster. There is no automatic way to modify an exported blueprint and make it instantly usable in Cloudbreak, the modifications have to be done manually. </p>
<p>In general, the blueprint should include the following elements:</p>
<pre>"Blueprints": {
    "blueprint_name": "hdp-small-default",
    "stack_name": "HDP",
    "stack_version": "2.6"
  },
  "settings": [],
  "configurations": [],
  "host_groups": [
  {
      "name": "master",
      "configurations": [],
      "components": []
    },
    {
      "name": "worker",
      "configurations": [],
      "components": [ ]
    },
    {
      "name": "compute",
      "configurations": [],
      "components": []
    }
   ]
  }</pre>

<p>For correct blueprint layout and other information about Ambari blueprints, refer to the <a href="https://cwiki.apache.org/confluence/display/AMBARI/Blueprints">Ambari cwiki</a> page. </p>
<p>Cloudbreak requires you to define an additional element in the blueprint called "blueprint_name". This should be a unique name within Cloudbreak list of blueprints. That is not included in the Ambari export. For example:</p>
<pre>"Blueprints": {
    "blueprint_name": "hdp-small-default",
    "stack_name": "HDP",
    "stack_version": "2.6"
  },
  "settings": [],
  "configurations": [],
  "host_groups": [
  ...
</pre>

<p>After you provide the blueprint to Cloudbreak, the host groups in the JSON will be mapped to a set of instances when starting the cluster, and the specified services and components will be installed on the corresponding nodes. It is not necessary to define a complete configuration in the blueprint. If a configuration is missing, Ambari will use a default value. </p>
<p>Here are a few <a href="https://github.com/hortonworks/cloudbreak/tree/master/core/src/main/resources/defaults/blueprints">blueprint examples</a>. You can also refer to the default blueprints provided in the Cloudbreak UI.</p>
<p><strong>Related Links</strong><br />
<a href="https://github.com/hortonworks/cloudbreak/tree/master/core/src/main/resources/defaults/blueprints">Blueprint Examples</a> (Hortonworks)   <br />
<a href="https://cwiki.apache.org/confluence/display/AMBARI/Blueprints">Ambari cwiki</a> (External)  </p>
<h4 id="upload-a-blueprint">Upload a Blueprint</h4>
<p>Once you have your blueprint ready, perform these steps.</p>
<p><strong>Steps</strong></p>
<ol>
<li>In the Cloudbreak UI, select <strong>Blueprints</strong> from the navigation pane. </li>
<li>
<p>To add your own blueprint, click <strong>Create Blueprint</strong> and enter the following parameters:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Name</td>
<td>Enter a name for your blueprint.</td>
</tr>
<tr>
<td>Description</td>
<td>(Optional) Enter a description for your blueprint.</td>
</tr>
<tr>
<td>Blueprint Source</td>
<td><p>Select one of: <ul><li><strong>Text</strong>: Paste blueprint in JSON format.</li><li> <strong>File</strong>: Upload a file that contains the blueprint.</li><li> <strong>URL</strong>: Specify the URL for your blueprint.</li></ul></td>
</tr>
</tbody>
</table>
<p><a href="../images/cb-blueprint-add.png" target="_blank" title="click to enlarge"><img src="../images/cb-blueprint-add.png" width="650" title="Cloudbreak web UI"></a> </p>
</li>
<li>
<p>To use the uploaded blueprints, select it when creating a cluster. The option is available on the <strong>General Configuration</strong> page. First select the <strong>Platform Version</strong> and then select your chosen blueprint under <strong>Cluster Type</strong>. </p>
<p><a href="../images/cb-blueprint-select.png" target="_blank" title="click to enlarge"><img src="../images/cb-blueprint-select.png" width="650" title="Cloudbreak web UI"></a> </p>
</li>
</ol>
<h3 id="view-blueprint-details">View Blueprint Details</h3>
<p>Once a blueprint has been registered in Cloudbreak, you can access its details in the Cloudbreak UI.</p>
<p><strong>Steps</strong></p>
<ol>
<li>
<p>In the Cloudbreak UI, select <strong>Blueprints</strong> from the navigation pane. </p>
</li>
<li>
<p>Click on an entry to navigate to details. </p>
<p>You can view blueprint details using the <strong>List View</strong> and <strong>Raw View</strong>:</p>
<p><a href="../images/cb-blueprint-details.png" target="_blank" title="click to enlarge"><img src="../images/cb-blueprint-details.png" width="650" title="Cloudbreak web UI"></a> </p>
</li>
</ol>
<h3 id="delete-blueprint">Delete Blueprint</h3>
<p>To delete a default or custom blueprint, perform these steps.</p>
<p><strong>Steps</strong></p>
<ol>
<li>
<p>In the Cloudbreak UI, select <strong>Blueprints</strong> from the navigation pane. </p>
</li>
<li>
<p>Click on an entry to navigate to details. </p>
</li>
<li>
<p>Click <strong>Delete</strong>. </p>
</li>
<li>
<p>Confirm delete. </p>
</li>
</ol></div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        <p>
        <small>© 2011-2018 <a href="http://www.hortonworks.com" target="_blank">Hortonworks Inc</a>. All Rights Reserved. | <a href="http://hortonworks.com/privacy-policy/" target="_blank">Privacy Policy</a><br></small>
        
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
    </footer>

    <script src="../js/jquery-1.10.2.min.js"></script>
    <script src="../js/bootstrap-3.0.3.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '..';
    </script>
    <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
    <script src="../js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
